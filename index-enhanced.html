<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POSSE Dance Academy</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Noto+Sans+JP:wght@300;400;500;600;700&display=swap');

        :root {
            --bg: #f5f5f7;
            --sidebar-bg: #1d1d1f;
            --card: #ffffff;
            --text-primary: #1d1d1f;
            --text-secondary: #86868b;
            --text-tertiary: #aeaeb2;
            --accent: #0071e3;
            --accent-hover: #0077ED;
            --green: #34c759;
            --orange: #ff9500;
            --red: #ff3b30;
            --purple: #af52de;
            --border: rgba(0,0,0,0.06);
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.04), 0 1px 2px rgba(0,0,0,0.06);
            --shadow-md: 0 4px 14px rgba(0,0,0,0.06), 0 2px 6px rgba(0,0,0,0.04);
            --shadow-lg: 0 10px 40px rgba(0,0,0,0.08), 0 4px 12px rgba(0,0,0,0.04);
            --radius: 16px;
            --radius-sm: 12px;
            --radius-xs: 8px;
            --transition: all 0.3s cubic-bezier(0.25, 0.1, 0.25, 1);
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans JP", sans-serif;
            background: var(--bg);
            color: var(--text-primary);
            -webkit-font-smoothing: antialiased;
        }

        /* ===== SIDEBAR - Apple Style ===== */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 260px;
            height: 100vh;
            background: var(--sidebar-bg);
            color: white;
            padding: 32px 0;
            overflow-y: auto;
            z-index: 1000;
            display: flex;
            flex-direction: column;
        }

        .sidebar-logo {
            padding: 0 28px;
            margin-bottom: 40px;
        }

        .sidebar-logo h1 {
            font-size: 22px;
            font-weight: 700;
            letter-spacing: -0.5px;
            line-height: 1.2;
        }

        .sidebar-logo p {
            font-size: 13px;
            color: rgba(255,255,255,0.45);
            margin-top: 4px;
            letter-spacing: 1.5px;
        }

        .sidebar nav {
            display: flex;
            flex-direction: column;
            gap: 2px;
            padding: 0 12px;
        }

        .sidebar .nav-section-label {
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1.2px;
            color: rgba(255,255,255,0.25);
            padding: 20px 16px 8px;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 14px;
            padding: 12px 16px;
            background: transparent;
            border: none;
            color: rgba(255,255,255,0.55);
            cursor: pointer;
            border-radius: var(--radius-sm);
            font-size: 14px;
            font-weight: 500;
            transition: var(--transition);
            letter-spacing: -0.1px;
            font-family: inherit;
            text-align: left;
            width: 100%;
        }

        .nav-item:hover {
            color: rgba(255,255,255,0.85);
            background: rgba(255,255,255,0.06);
        }

        .nav-item.active {
            color: white;
            background: var(--accent);
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(0,113,227,0.35);
        }

        .nav-item svg {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
            opacity: 0.7;
        }

        .nav-item.active svg {
            opacity: 1;
        }

        /* ===== MAIN CONTENT ===== */
        .main-content {
            margin-left: 260px;
            min-height: 100vh;
            padding: 40px 48px;
        }

        /* ===== PAGE HEADER ===== */
        .page-header {
            display: flex;
            align-items: flex-end;
            justify-content: space-between;
            margin-bottom: 36px;
        }

        .page-header h2 {
            font-size: 34px;
            font-weight: 700;
            letter-spacing: -1px;
            line-height: 1.1;
        }

        .page-header .subtitle {
            font-size: 15px;
            color: var(--text-secondary);
            margin-top: 6px;
            font-weight: 400;
        }

        .date-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-secondary);
            background: white;
            padding: 8px 16px;
            border-radius: 20px;
            box-shadow: var(--shadow-sm);
        }

        /* ===== CARDS ===== */
        .card {
            background: var(--card);
            border-radius: var(--radius);
            padding: 28px;
            box-shadow: var(--shadow-sm);
            transition: var(--transition);
            border: none;
        }

        .card:hover {
            box-shadow: var(--shadow-md);
        }

        /* ===== STAT CARDS ===== */
        .stat-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 32px;
        }

        .stat-card {
            background: var(--card);
            border-radius: var(--radius);
            padding: 28px;
            box-shadow: var(--shadow-sm);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .stat-card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }

        .stat-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
        }

        .stat-icon svg { width: 20px; height: 20px; }
        .stat-icon.blue { background: rgba(0,113,227,0.1); color: var(--accent); }
        .stat-icon.green { background: rgba(52,199,89,0.1); color: var(--green); }
        .stat-icon.orange { background: rgba(255,149,0,0.1); color: var(--orange); }
        .stat-icon.red { background: rgba(255,59,48,0.1); color: var(--red); }
        .stat-icon.purple { background: rgba(175,82,222,0.1); color: var(--purple); }

        .stat-label { font-size: 13px; font-weight: 500; color: var(--text-secondary); margin-bottom: 8px; letter-spacing: 0.2px; }
        .stat-value { font-size: 42px; font-weight: 700; letter-spacing: -2px; line-height: 1; }
        .stat-unit { font-size: 16px; font-weight: 500; color: var(--text-secondary); margin-left: 4px; letter-spacing: 0; }
        .stat-change { display: inline-flex; align-items: center; gap: 4px; font-size: 12px; font-weight: 600; margin-top: 12px; padding: 4px 10px; border-radius: 20px; }
        .stat-change.up { background: rgba(52,199,89,0.1); color: var(--green); }
        .stat-change.down { background: rgba(255,59,48,0.1); color: var(--red); }

        /* ===== CONTENT GRID ===== */
        .content-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 32px;
        }

        .content-grid.full { grid-template-columns: 1fr; }

        .content-card {
            background: var(--card);
            border-radius: var(--radius);
            padding: 32px;
            box-shadow: var(--shadow-sm);
            transition: var(--transition);
        }

        .content-card:hover { box-shadow: var(--shadow-md); }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 24px;
        }

        .card-title { font-size: 18px; font-weight: 600; letter-spacing: -0.3px; }
        .card-action { font-size: 13px; font-weight: 500; color: var(--accent); cursor: pointer; transition: var(--transition); }
        .card-action:hover { opacity: 0.7; }

        /* ===== REVENUE BREAKDOWN ===== */
        .revenue-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 14px 0;
            border-bottom: 1px solid var(--border);
        }

        .revenue-row:last-child { border-bottom: none; }
        .rev-label { display: flex; align-items: center; gap: 12px; font-size: 14px; font-weight: 500; }
        .rev-dot { width: 10px; height: 10px; border-radius: 50%; flex-shrink: 0; }
        .rev-detail { font-size: 13px; color: var(--text-secondary); text-align: right; }
        .rev-amount { font-size: 16px; font-weight: 600; letter-spacing: -0.3px; }
        .revenue-total { display: flex; justify-content: space-between; align-items: center; padding: 20px 0 0; margin-top: 8px; border-top: 2px solid var(--text-primary); }
        .revenue-total .rev-label { font-size: 16px; font-weight: 600; }
        .revenue-total .rev-amount { font-size: 28px; font-weight: 700; letter-spacing: -1px; }

        /* ===== VISITOR REVENUE CARD ===== */
        .visitor-highlight {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: var(--radius);
            padding: 32px;
            position: relative;
            overflow: hidden;
        }

        .visitor-highlight::after {
            content: '';
            position: absolute;
            top: -30%;
            right: -10%;
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: rgba(255,255,255,0.08);
        }

        .vh-label { font-size: 13px; font-weight: 500; opacity: 0.75; margin-bottom: 8px; }
        .vh-value { font-size: 48px; font-weight: 700; letter-spacing: -2px; line-height: 1; margin-bottom: 4px; }
        .vh-detail { font-size: 14px; opacity: 0.65; }

        /* ===== BUTTONS ===== */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 22px;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            font-family: inherit;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            letter-spacing: -0.1px;
        }

        .btn-primary {
            background: var(--accent);
            color: white;
            border: none;
            padding: 10px 22px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            font-family: inherit;
            transition: var(--transition);
            box-shadow: 0 2px 8px rgba(0,113,227,0.25);
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary:hover {
            background: var(--accent-hover);
            box-shadow: 0 4px 14px rgba(0,113,227,0.35);
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: rgba(0,0,0,0.05);
            color: var(--text-primary);
            border: none;
            padding: 10px 22px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            font-family: inherit;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-secondary:hover {
            background: rgba(0,0,0,0.08);
        }

        .btn-danger {
            background: var(--red);
            color: white;
            border: none;
            padding: 10px 22px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            font-family: inherit;
            transition: var(--transition);
            box-shadow: 0 2px 8px rgba(255,59,48,0.25);
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-danger:hover {
            background: #ff453a;
            box-shadow: 0 4px 14px rgba(255,59,48,0.35);
            transform: translateY(-1px);
        }

        .btn-green {
            background: var(--green);
            color: white;
            border: none;
            padding: 10px 22px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            font-family: inherit;
            transition: var(--transition);
            box-shadow: 0 2px 8px rgba(52,199,89,0.25);
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-green:hover {
            background: #3dd65f;
            box-shadow: 0 4px 14px rgba(52,199,89,0.35);
            transform: translateY(-1px);
        }

        .btn-sm {
            padding: 7px 14px;
            font-size: 12px;
            border-radius: var(--radius-xs);
        }

        /* ===== BADGES ===== */
        .badge {
            display: inline-flex;
            align-items: center;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            letter-spacing: 0.2px;
        }

        .badge-green {
            background: rgba(52,199,89,0.1);
            color: var(--green);
        }

        .badge-yellow {
            background: rgba(255,149,0,0.1);
            color: var(--orange);
        }

        .badge-gray {
            background: rgba(142,142,147,0.1);
            color: #8e8e93;
        }

        .badge-red {
            background: rgba(255,59,48,0.1);
            color: var(--red);
        }

        .badge-blue {
            background: rgba(0,113,227,0.08);
            color: var(--accent);
        }

        /* ===== SEARCH BAR ===== */
        .search-bar {
            display: flex;
            align-items: center;
            gap: 10px;
            background: white;
            border-radius: var(--radius-sm);
            padding: 12px 20px;
            box-shadow: var(--shadow-sm);
            margin-bottom: 24px;
            transition: var(--transition);
            border: 2px solid transparent;
        }

        .search-bar:focus-within {
            border-color: var(--accent);
            box-shadow: 0 0 0 4px rgba(0,113,227,0.1);
        }

        .search-bar svg { color: var(--text-tertiary); flex-shrink: 0; }

        .search-bar input {
            border: none;
            outline: none;
            font-size: 15px;
            font-family: inherit;
            color: var(--text-primary);
            width: 100%;
            background: transparent;
        }

        .search-bar input::placeholder { color: var(--text-tertiary); }

        /* ===== FORM INPUTS ===== */
        .form-input {
            padding: 12px 16px;
            border: 2px solid var(--border);
            border-radius: var(--radius-xs);
            font-size: 14px;
            font-family: inherit;
            transition: var(--transition);
            background: white;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 4px rgba(0,113,227,0.1);
        }

        /* ===== TABLES ===== */
        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
        }

        th {
            background: rgba(0,0,0,0.02);
            padding: 14px 16px;
            text-align: left;
            font-weight: 600;
            font-size: 12px;
            color: var(--text-secondary);
            border-bottom: 1px solid var(--border);
            letter-spacing: 0.3px;
            text-transform: uppercase;
        }

        td {
            padding: 14px 16px;
            border-bottom: 1px solid var(--border);
            font-size: 14px;
        }

        tr:hover td {
            background: rgba(0,113,227,0.02);
        }

        /* ===== TAB BAR (Apple Segmented Control) ===== */
        .tab-nav {
            display: flex;
            gap: 4px;
            background: rgba(0,0,0,0.04);
            padding: 4px;
            border-radius: var(--radius-sm);
            margin-bottom: 24px;
            width: fit-content;
            border-bottom: none;
        }

        .tab-btn {
            padding: 8px 20px;
            background: transparent;
            border: none;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-secondary);
            border-radius: var(--radius-xs);
            transition: var(--transition);
            font-family: inherit;
            border-bottom: none;
        }

        .tab-btn.active {
            background: white;
            color: var(--text-primary);
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
            font-weight: 600;
        }

        /* ===== CUSTOMER CARDS ===== */
        .customer-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .customer-row {
            background: white;
            border-radius: var(--radius-sm);
            padding: 20px 24px;
            display: grid;
            grid-template-columns: 48px 1fr 100px 140px 120px 80px;
            align-items: center;
            gap: 16px;
            box-shadow: var(--shadow-sm);
            transition: var(--transition);
            cursor: pointer;
        }

        .customer-row:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-1px);
        }

        .customer-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            font-weight: 600;
            color: white;
            flex-shrink: 0;
        }

        .customer-info h4 { font-size: 15px; font-weight: 600; letter-spacing: -0.2px; margin-bottom: 3px; }
        .customer-info p { font-size: 12px; color: var(--text-secondary); }
        .customer-course { font-size: 13px; font-weight: 600; color: var(--accent); background: rgba(0,113,227,0.08); padding: 5px 12px; border-radius: 20px; text-align: center; }
        .customer-phone { font-size: 13px; color: var(--text-secondary); font-variant-numeric: tabular-nums; }
        .customer-date { font-size: 13px; color: var(--text-secondary); }

        /* ===== INSTRUCTOR CARDS ===== */
        .instructor-card {
            background: var(--card);
            border-radius: var(--radius);
            box-shadow: var(--shadow-sm);
            overflow: hidden;
            transition: var(--transition);
            border: none;
        }

        .instructor-card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }

        .instructor-header {
            padding: 28px 28px 20px;
            border-bottom: 1px solid var(--border);
            background: rgba(0,0,0,0.01);
        }

        .instructor-name {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 4px;
            letter-spacing: -0.3px;
        }

        .instructor-stage {
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 12px;
        }

        .instructor-body {
            padding: 24px 28px;
        }

        .instructor-section {
            margin-bottom: 16px;
        }

        .instructor-section:last-child {
            margin-bottom: 0;
        }

        .instructor-section-title {
            font-size: 11px;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }

        /* ===== STATUS BADGES ===== */
        .status-badge-active { background: rgba(52,199,89,0.1); color: var(--green); font-weight: 600; border-radius: 20px; padding: 4px 12px; }
        .status-badge-paused { background: rgba(255,149,0,0.1); color: var(--orange); font-weight: 600; border-radius: 20px; padding: 4px 12px; }
        .status-badge-withdrawn { background: rgba(142,142,147,0.1); color: #8e8e93; font-weight: 600; border-radius: 20px; padding: 4px 12px; }
        .gender-male { color: var(--accent); font-weight: 600; }
        .gender-female { color: var(--red); font-weight: 600; }

        /* ===== SORTABLE HEADERS ===== */
        .sortable-header { cursor: pointer; user-select: none; transition: var(--transition); }
        .sortable-header:hover { background: rgba(0,0,0,0.04); }
        .sort-icon { display: inline-block; margin-left: 4px; font-size: 10px; }

        /* ===== TEXT CELLS ===== */
        td.memo-cell {
            white-space: normal !important;
            word-wrap: break-word;
            word-break: break-word;
            line-height: 1.5;
            padding-top: 14px !important;
            padding-bottom: 14px !important;
            vertical-align: top;
        }

        td.email-cell {
            white-space: nowrap !important;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* ===== CLASS COLORS ===== */
        .class-red { background-color: #DC2626; }
        .class-orange { background-color: #EA580C; }
        .class-blue { background-color: #2563EB; }
        .class-green { background-color: #16A34A; }
        .class-purple { background-color: #9333EA; }

        .border-red-500 { border-color: #EF4444; }
        .border-orange-500 { border-color: #F97316; }
        .border-blue-500 { border-color: #3B82F6; }
        .border-green-500 { border-color: #22C55E; }
        .border-purple-500 { border-color: #A855F7; }

        .text-red-600 { color: #DC2626; }
        .text-orange-600 { color: #EA580C; }
        .text-blue-600 { color: #2563EB; }
        .text-green-600 { color: #16A34A; }
        .text-purple-600 { color: #9333EA; }

        .bg-red-600 { background-color: #DC2626; }
        .bg-orange-600 { background-color: #EA580C; }
        .bg-blue-600 { background-color: #2563EB; }
        .bg-green-600 { background-color: #16A34A; }
        .bg-purple-600 { background-color: #9333EA; }

        /* ===== SCROLLBAR ===== */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.15); border-radius: 3px; }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .animate-spin {
            animation: spin 1s linear infinite;
        }

        .student-search-results {
            max-height: 300px;
            overflow-y: auto;
            z-index: 10;
        }

        .select-customer-btn:hover {
            background: rgba(0,113,227,0.04);
        }

        /* Tab active state (for backward compatibility) */
        .tab-active { background: white; color: var(--text-primary); box-shadow: 0 1px 3px rgba(0,0,0,0.08); font-weight: 600; border-radius: var(--radius-xs); }
        .status-tab-active { background: var(--accent); color: white; border-radius: var(--radius-xs); }
    </style>
</head>
<body>
    <div id="app"></div>
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, addDoc, getDocs, doc, updateDoc, deleteDoc, setDoc } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
        const firebaseConfig = {
            apiKey: "AIzaSyBp3_3UwgOKkILJuWx8usYdQhGfB_bAD34",
            authDomain: "posse-dance-academy.firebaseapp.com",
            projectId: "posse-dance-academy",
            storageBucket: "posse-dance-academy.firebasestorage.app",
            messagingSenderId: "613497046871",
            appId: "1:613497046871:web:8a31cbc6b947617113e012"
        };
        const firebaseApp = initializeApp(firebaseConfig);
        const db = getFirestore(firebaseApp);
        class DanceStudioApp {
            constructor() {
                this.currentTab = 'home';
                this.statusFilter = '入会中';
                this.customers = [];
                this.editingId = null;
                this.editForm = {};
                this.showAddForm = false;
                this.searchTerm = '';
                this.sortField = 'memberNumber';
                this.sortOrder = 'asc';
                this.newCustomer = this.getEmptyCustomer();
                
                // 出席簿用
                this.attendanceTab = 'overview';
                this.selectedMonth = new Date().toISOString().slice(0, 7);
                this.selectedDay = '月曜日';
                this.attendanceData = {};
                this.eventAttendanceData = []; // イベント専用データ
                this.showAddStudentForm = false;
                this.selectedClassForAdd = null;
                this.isLoading = false;
                this.editingStudent = null; // 編集中の生徒情報
                this.studentSearchTerm = ''; // 生徒検索用
                this.studentSearchResults = []; // 検索結果
                this.selectedCustomerForStudent = null; // 選択された顧客情報
                
                this.pricing = {
                    '4クラス': 18600,
                    '４クラス': 18600,
                    '3クラス': 14400,
                    '３クラス': 14400,
                    '2クラス': 10000,
                    '２クラス': 10000,
                    '1クラス': 6000,
                    '１クラス': 6000,
                    '1.5hクラス': 6600,
                    '刨t��体験': 1000,
                    '刨t��無料': 0,
                    'ビジター（会員）': 2000,
                    'ビジター（非会員）': 2300,
                    'ビジター1.5h（会員）': 2200,
                    'ビジター1.5h（非会員）': 2500,
                    '月謝クラス振替': 1000,
                    '練習会': 500
                };
                this.planOrder = {
                    '4クラス': 1,
                    '４クラス': 1,
                    '3クラス': 2,
                    '３クラス': 2,
                    '2クラス': 3,
                    '２クラス': 3,
                    '1クラス': 4,
                    '１クラス': 4,
                    '1.5hクラス': 5,
                    'ビジター（会員）': 6,
                    'ビジター（非会員）': 7,
                    'ビジター（振替）': 8,
                    '刨t��体験': 9,
                    '刨t��無料': 10
                };
                this.scheduleData = {
                    '月曜日': [
                        { location: '天神', name: 'アクロバット SOYA', color: 'red', students: [
                            { lastName: '中島', firstName: '竜吾', plan: '３クラス' },
                            { lastName: '伊藤', firstName: '和馬', plan: '1クラス' },
                            { lastName: '四井', firstName: '陽音', plan: '３クラス' },
                            { lastName: '津留', firstName: '創真', plan: '２クラス' },
                            { lastName: '三重野', firstName: '琉生', plan: '３クラス' },
                            { lastName: 'ひわたし', firstName: 'こうた', plan: '２クラス' },
                            { lastName: '嶋川', firstName: '陽大', plan: '３クラス' },
                            { lastName: '', firstName: '大空', plan: '３クラス' }
                        ]},
                        { location: '天神', name: 'ブレイキン入門 SOYA', color: 'orange', students: [
                            { lastName: '津留', firstName: '創真', plan: '２クラス' },
                            { lastName: '榊', firstName: '花梨', plan: '２クラス' },
                            { lastName: 'ひわたし', firstName: 'こうた', plan: '２クラス' }
                        ]},
                        { location: '天神', name: 'トップロック フットワーク DAZ', color: 'blue', students: [
                            { lastName: '中島', firstName: '竜吾', plan: '３クラス' },
                            { lastName: '四井', firstName: '陽音', plan: '３クラス' },
                            { lastName: '伊藤', firstName: '和馬', plan: '1クラス' },
                            { lastName: '三重野', firstName: '琉生', plan: '３クラス' },
                            { lastName: '戸田', firstName: '唯斗', plan: '1クラス' },
                            { lastName: '森脇', firstName: '鳳仁', plan: '1クラス' },
                            { lastName: '嶋川', firstName: '陽大', plan: '２クラス' },
                            { lastName: '', firstName: '大空', plan: '３クラス' }
                        ]},
                        { location: '天神', name: 'K-POP AI', color: 'green', students: [
                            { lastName: '平嶋', firstName: '彩佳', plan: '1クラス' },
                            { lastName: '杉村', firstName: '早紀', plan: '1クラス' },
                            { lastName: '石原', firstName: '美黎', plan: '２クラス' },
                            { lastName: '田代', firstName: '杏奈', plan: '1クラス' },
                            { lastName: '唯野', firstName: '萌維', plan: '1クラス' }
                        ]},
                        { location: '天神', name: 'hiphop HIMEKA', color: 'purple', students: [
                            { lastName: '石原', firstName: '美黎', plan: '1クラス' },
                            { lastName: '中川', firstName: '凛音', plan: '２クラス' }
                        ]},
                        { location: '大橋', name: 'hiphop HIMEKA', color: 'purple', students: [
                            { lastName: '清水', firstName: 'くるみ', plan: '1クラス' }
                        ]}
                    ],
                    '火曜日': [
                        { location: '大橋', name: 'キッズダンス AYANO', color: 'red', students: [
                            { lastName: '古賀', firstName: '文人', plan: '1クラス' },
                            { lastName: '古賀', firstName: '卯月妃', plan: '1クラス' },
                            { lastName: '原口', firstName: '省吾', plan: '1クラス' },
                            { lastName: 'わたなべ', firstName: 'いとし', plan: '1クラス' },
                            { lastName: '富井', firstName: '藍', plan: '1クラス' }
                        ]},
                        { location: '大橋', name: 'Bgirlクラス AYANO HARUHIKO', color: 'orange', students: [
                            { lastName: '愛甲', firstName: '大輪', plan: '1クラス' }
                        ]},
                        { location: '照葉', name: 'ブレイキン入門 SOYA', color: 'blue', students: [
                            { lastName: '西園', firstName: '千晃', plan: '1クラス' },
                            { lastName: '榊', firstName: '花梨', plan: '２クラス' }
                        ]},
                        { location: '照葉', name: 'アクロ＆パワー SOYA', color: 'green', students: [
                            { lastName: '堤', firstName: '勇仁', plan: '1クラス' },
                            { lastName: '吉武', firstName: '凛保', plan: '３クラス' }
                        ]}
                    ],
                    '水曜日': [
                        { location: '天神', name: 'ブレイキン初級 HARUHIKO', color: 'red', students: [
                            { lastName: '田島', firstName: '渚', plan: '1クラス' },
                            { lastName: '吉田', firstName: '智幸', plan: '1クラス' },
                            { lastName: '本橋', firstName: '廉士', plan: '1クラス' },
                            { lastName: '酒井', firstName: '天優', plan: '1クラス' },
                            { lastName: '新藤', firstName: '大希', plan: '1クラス' },
                            { lastName: '荒巻', firstName: '大和', plan: '1クラス' },
                            { lastName: 'しん', firstName: 'よしと', plan: '1クラス' },
                            { lastName: '藤野', firstName: '蒼士', plan: '1クラス' }
                        ]},
                        { location: '天神', name: 'ブレイキン中上級 HARUHIKO', color: 'orange', students: [
                            { lastName: '森田', firstName: '翔真', plan: '1クラス' },
                            { lastName: '中山', firstName: '結愛', plan: '1クラス' },
                            { lastName: '', firstName: '大空', plan: '３クラス' },
                            { lastName: '迫田', firstName: 'りりあ', plan: '1クラス' }
                        ]}
                    ],
                    '木曜日': [
                        { location: '大橋', name: 'ブレイキン入門 SOYA', color: 'red', students: [
                            { lastName: '豊福', firstName: '悠成', plan: '1クラス' },
                            { lastName: '吉村', firstName: '太壱', plan: '２クラス' },
                            { lastName: '池田', firstName: '全', plan: '1クラス' },
                            { lastName: '澤江', firstName: '悠', plan: '1クラス' },
                            { lastName: '原口', firstName: '賢伸', plan: '２クラス' },
                            { lastName: '渡邉', firstName: '創太', plan: '２クラス' },
                            { lastName: '藤田', firstName: '将舞', plan: '２クラス' },
                            { lastName: '藤田', firstName: '凌羽', plan: '２クラス' },
                            { lastName: '小柳', firstName: '友陽', plan: '２クラス' },
                            { lastName: '山下', firstName: '幸四郎', plan: '1クラス' }
                        ]},
                        { location: '大橋', name: 'アクロ＆パワー SOYA', color: 'orange', students: [
                            { lastName: '中山', firstName: '結愛', plan: '２クラス' },
                            { lastName: '豊福', firstName: '悠成', plan: '２クラス' },
                            { lastName: '吉村', firstName: '太壱', plan: '２クラス' },
                            { lastName: '原口', firstName: '賢伸', plan: '２クラス' },
                            { lastName: '四井', firstName: '陽音', plan: '２クラス' },
                            { lastName: '渡邉', firstName: '創太', plan: '２クラス' },
                            { lastName: '萩原', firstName: '聖香', plan: '1クラス' },
                            { lastName: '小柳', firstName: '友陽', plan: '２クラス' },
                            { lastName: '澤江', firstName: '悠', plan: '1クラス' }
                        ]},
                        { location: '照葉', name: 'ブレイキン入門 リュウセイ', color: 'blue', students: [
                            { lastName: '楊', firstName: 'ビンチェンエイデン', plan: '２クラス' },
                            { lastName: '楊', firstName: 'エクソ', plan: '２クラス' },
                            { lastName: 'しぎょう', firstName: 'とうま', plan: '1クラス' },
                            { lastName: 'しぎょう', firstName: 'ゆうま', plan: '1クラス' },
                            { lastName: '梅野', firstName: '壮大', plan: '２クラス' },
                            { lastName: '梅野', firstName: '絢音', plan: '２クラス' },
                            { lastName: '長谷川', firstName: '丈', plan: '２クラス' }
                        ]},
                        { location: '照葉', name: 'アクロ＆パワー リュウセイ', color: 'green', students: [
                            { lastName: '吉武', firstName: '凛保', plan: '２クラス' },
                            { lastName: '楊', firstName: 'ビンチェンエイデン', plan: '２クラス' },
                            { lastName: '楊', firstName: 'エクソ', plan: '２クラス' },
                            { lastName: '工藤', firstName: '大地', plan: '２クラス' },
                            { lastName: '長谷川', firstName: '丈', plan: '２クラス' },
                            { lastName: '梅野', firstName: '壮大', plan: '２クラス' },
                            { lastName: '梅野', firstName: '絢音', plan: '２クラス' }
                        ]}
                    ],
                    '金曜日': [
                        { location: '天神', name: 'アクロ＆パワー SOYA', color: 'red', students: [
                            { lastName: '中島', firstName: '竜吾', plan: '３クラス' },
                            { lastName: '伊藤', firstName: '和馬', plan: '３クラス' },
                            { lastName: '藤野', firstName: '蒼士', plan: '1クラス' },
                            { lastName: '中山', firstName: '隼', plan: '1クラス' },
                            { lastName: '三重野', firstName: '琉生', plan: '３クラス' },
                            { lastName: 'よこやま', firstName: 'ゆめ', plan: '２クラス' }
                        ]},
                        { location: '天神', name: 'ブレイキン初中級 HARUHIKO', color: 'orange', students: [
                            { lastName: '中島', firstName: '竜吾', plan: '３クラス' },
                            { lastName: '三重野', firstName: '琉生', plan: '３クラス' },
                            { lastName: 'よこやま', firstName: 'ゆめ', plan: '２クラス' },
                            { lastName: '伊藤', firstName: '和馬', plan: '３クラス' }
                        ]},
                        { location: '大橋', name: 'ブレイキン入門 HARUHIKO', color: 'blue', students: [
                            { lastName: '萩尾', firstName: '郁海', plan: '２クラス' },
                            { lastName: '矢野', firstName: '新', plan: '1クラス' },
                            { lastName: '伊豆永', firstName: '晄逢', plan: '1クラス' },
                            { lastName: '藤川', firstName: '悠利', plan: '２クラス' },
                            { lastName: '藤川', firstName: '柊利', plan: '２クラス' },
                            { lastName: '三重野', firstName: 'かな', plan: '２クラス' },
                            { lastName: '久保田', firstName: '朱里', plan: '1クラス' },
                            { lastName: '古賀', firstName: '心太郎', plan: '1クラス' }
                        ]},
                        { location: '大橋', name: 'アクロ＆パワー ryusei', color: 'green', students: [
                            { lastName: '萩尾', firstName: '郁海', plan: '２クラス' },
                            { lastName: '藤川', firstName: '悠利', plan: '２クラス' },
                            { lastName: '藤川', firstName: '柊利', plan: '２クラス' },
                            { lastName: '三重野', firstName: 'かな', plan: '２クラス' },
                            { lastName: '児玉', firstName: '蛍斗', plan: '1クラス' }
                        ]}
                    ],
                    'イベント': []
                };

                // 講師プロフィールデータ
                this.instructorData = [
                    {
                        name: '邑本 康祐', stageName: 'Mottchmen', genre: "BREAKIN'", birthDate: '1975/3/31',
                        careerStart: '1997年よりブレイクダンスを中心にダンスを始める',
                        profile: '', message: '',
                        awards: ['2013年 UK bboy championships 九州予選 準優勝','2014年 UK bboy championships 九州予選 準優勝','2015年 WDC 九州大会 best4','2016年 UK bboy championships japan final best8','2017年 WDC 九州大会 best4','2018年 UK bboy championships japan final best4','2018年 Superman grand championships 準優勝','2019,2020年 PARTY×LINE crewbattle 優勝'],
                        otherExperience: ['SUNSET LIVE 2017,2018,2019','RHYMESTER BBOYイズム バックダンサーとして出演'],
                        lessons: ['K2JAM ダンススタジオ 2010年〜','スターリー69 ダンススタジオ 2021年9月〜']
                    },
                    {
                        name: '中島 春彦', stageName: 'HARUHIKO aka WATCHM3N', genre: "BREAKIN'", birthDate: '1982/03/10',
                        careerStart: '1999年よりダンス（ブレイキング）のキャリアスタート',
                        profile: '2000年からブレイキンのオリジナリティスタートし、ダンスバトルやショウケース、審査員などで九州内外で活動しています。',
                        message: 'ブレイキンは非常に運動量の多いダンスです。子供たちの身体能力、柔軟性、体幹を無理なく鍛え、挫折なく効率的に上達できるようなカリキュラムを組んでいます。',
                        awards: ['2005年 UK B-BOY CHAMPIONSHIPS JAPAN ELIMINATION 準優勝','2006年 UK B-BOY CHAMPIONSHIPS JAPAN ELIMINATION BEST4','2012年 Red Bull BC One japanfinal best4','2015年 World Dance Colosseum ワールドファイナル世界大会審査員','2018年 Red Bull BC One japanfinal best16','2020年 SUPER BREAK 世界大会審査員'],
                        otherExperience: ['JAPAN DANCE DELIGHT ファイナリスト','GARAND CHAMPION CARNIVAL ファイナリスト複数回','SUNSET LIVE 2017,2018,2019','RHYMESTER BBOYイズム バックダンサー','RHYMESTER 全国ツアー 福岡バックダンサー'],
                        lessons: ['FEELダンススタジオ 指導歴10年以上','スタジオMJ（世界No.1ブレイクダンサーISSEIを輩出したスタジオ）']
                    },
                    {
                        name: '甲斐 僧耶', stageName: 'SOYA', genre: 'アクロバット・ブレイキン', birthDate: '1995/11/22',
                        careerStart: '2012年よりブレイクダンスを中心にキャリアスタート',
                        profile: '小学生の頃、テレビ番組「スーパーチャンプル」を見てダンスに興味を持ち、高2年の冬に本格的にブレイクダンスを始めました。',
                        message: 'パワームーブやフリーズ、アクロバットも得意としています。生徒一人ひとりに合わせて指導し、楽しみながら本人の目標に向けてレベルアップしていくことを大切にしています。',
                        awards: ['2017年 SASEBO DANCE FES 特別賞STEEZ PRIZE','2018年 Kirafes Cup Battle Jam Vol.12 Breakin Side 優勝','2018年 GABANERO Vol.19 優勝','2019年 GABANEROVol.20 準優勝','2019年 UK九州予選 Best 4','2019年 GRAND CHAMPION CARNIVAL Free Style ファイナリスト','2020年 GABANERO Vol.22 優勝'],
                        otherExperience: ['TBS系列ナイナイお見合い大作戦in八女出演','Emotion rise kyushu支部 フラッシュモブ 元キャスト','RKBTV【チャギハ】Xperia商品PR ダンサー出演'],
                        lessons: ['TUDIO COLOR 2015〜2020','STUDIO TRAX 2015〜2018','FUNKFUNDANCECOMPANY 2015〜2022','SPROUT production 2019〜現在']
                    },
                    {
                        name: '伊藤 厚史', stageName: 'Ryce', genre: "BREAKIN'", birthDate: '1986/10/18',
                        careerStart: '2004年より中学の頃にブレイクダンスを始める',
                        profile: '福岡を拠点に九州をレベゼして活動しているBboy。',
                        message: '楽しみながら本人の目標に向けてレベルアップしていくことを大切にしています。',
                        awards: ['2007年 BIG WAX','2009年 Buzz Style','2011年 R-16 世界大会','2013年 UK bboy'],
                        otherExperience: ['オーストラリア・タイ・その他多数の海外経験'],
                        lessons: ['指導歴8年近く。福岡以外にも佐賀や熊本でもレッスン経験あり']
                    }
                ];

                // タイムスケジュールデータ
                this.timeScheduleData = {
                    '月曜日': [
                        { time: '18:00-19:00', venue: '天神校', name: 'アクロバット SOYA', color: '#DC2626' },
                        { time: '18:00-19:00', venue: '天神校', name: 'ブレイキン入門 SOYA', color: '#EA580C' },
                        { time: '19:00-20:00', venue: '天神校', name: 'hiphop HIMEKA', color: '#9333EA' },
                        { time: '20:00-21:00', venue: '天神校', name: 'K-POP AI', color: '#16A34A' },
                        { time: '19:00-20:00', venue: '大橋校', name: 'hiphop HIMEKA', color: '#9333EA' },
                        { time: '20:00-21:00', venue: '大橋校', name: 'トップロック フットワーク DAZ', color: '#2563EB' },
                        { time: '21:00-22:00', venue: '大橋校', name: '練習会', color: '#F59E0B' }
                    ],
                    '火曜日': [
                        { time: '16:50-17:50', venue: '大橋校', name: 'HIPHOP ヒメカ', color: '#DC2626' },
                        { time: '17:30-18:30', venue: '大橋校', name: 'キッズダンス AYANO', color: '#EA580C' },
                        { time: '18:40-19:40', venue: '大橋校', name: 'Bgirlクラス AYANO HARUHIKO', color: '#EA580C' },
                        { time: '19:00-20:00', venue: '照葉校', name: 'ブレイキン入門 SOYA', color: '#2563EB' },
                        { time: '20:00-21:00', venue: '照葉校', name: 'アクロ＆パワー SOYA', color: '#16A34A' }
                    ],
                    '水曜日': [
                        { time: '18:30-19:30', venue: '天神校', name: 'ブレイキン初級 HARUHIKO', color: '#DC2626' },
                        { time: '19:30-21:00', venue: '天神校', name: 'ブレイキン中上級 HARUHIKO', color: '#EA580C' }
                    ],
                    '木曜日': [
                        { time: '18:30-19:30', venue: '大橋校', name: 'ブレイキン入門 SOYA', color: '#DC2626' },
                        { time: '19:20-20:20', venue: '大橋校', name: 'アクロ＆パワー SOYA', color: '#EA580C' },
                        { time: '20:30-21:30', venue: '大橋校', name: 'パワームーブ＆アクロ SOYA', color: '#2563EB' },
                        { time: '18:30-19:30', venue: '照葉校', name: 'ブレイキン入門 リュウセイ', color: '#DC2626' },
                        { time: '19:30-20:30', venue: '照葉校', name: 'パワーアクロ リュウセイ', color: '#EA580C' },
                        { time: '21:30-23:10', venue: '照葉校', name: '練習会', color: '#F59E0B' }
                    ],
                    '金曜日': [
                        { time: '17:50-18:50', venue: '大橋校', name: 'ブレイキン入門 HARUHIKO', color: '#2563EB' },
                        { time: '19:00-20:00', venue: '天神校', name: 'アクロ＆パワー SOYA', color: '#DC2626' },
                        { time: '19:00-20:00', venue: '大橋校', name: 'パワーアクロ リュウセイ', color: '#EA580C' },
                        { time: '20:00-21:00', venue: '天神校', name: 'ブレイキン初中級 HARUHIKO', color: '#EA580C' },
                        { time: '20:00-21:00', venue: '大橋校', name: 'アクロ＆パワー ryusei', color: '#16A34A' }
                    ]
                };
            }
            getEmptyCustomer() {
                return {
                    memberNumber: '', status: '入会中', course: '', annualFee: '', hakomonoRegistration: '',
                    lastName: '', firstName: '', reading: '', guardianName: '', hakomonoName: '',
                    gender: '', birthDate: '', phone1: '', phone2: '', email: '',
                    postalCode: '', prefecture: '', city: '', address: '', building: '',
                    joinDate: '', memo: ''
                };
            }
            calculateAge(birthDate) {
                if (!birthDate) return '';
                const today = new Date();
                const birth = new Date(birthDate);
                let age = today.getFullYear() - birth.getFullYear();
                const monthDiff = today.getMonth() - birth.getMonth();
                if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birth.getDate())) {
                    age--;
                }
                return age + '歳';
            }
            async init() {
                await this.loadCustomers();
                await this.loadScheduleData();
                await this.loadAttendance();
                await this.loadEventAttendance();
                
                // 全クラスの生徒をプラン順にソート
                Object.keys(this.scheduleData).forEach(day => {
                    this.scheduleData[day].forEach(classInfo => {
                        classInfo.students = this.sortStudentsByPlan(classInfo.students);
                    });
                });
                
                this.render();
            }
            async loadCustomers() {
                try {
                    const querySnapshot = await getDocs(collection(db, 'customers'));
                    this.customers = querySnapshot.docs.map(doc => {
                        const data = doc.data();
                        return {
                            id: doc.id,
                            ...data,
                            status: data.status || (data.active === '○' ? '入会中' : '休会中')
                        };
                    });
                    // クライアント側で会員番号順にソート
                    this.customers.sort((a, b) => {
                        const aNum = a.memberNumber || '';
                        const bNum = b.memberNumber || '';
                        return aNum > bNum ? 1 : -1;
                    });
                } catch (error) {
                    console.error('データ読み込みエラー:', error);
                    this.customers = [];
                }
            }
            async loadScheduleData() {
                try {
                    const querySnapshot = await getDocs(collection(db, 'schedule'));
                    if (querySnapshot.empty) {
                        // Firestoreにデータがない場合は初期データを保存
                        console.log('スケジュールデータが見つかりません。初期データを保存します。');
                        await this.saveScheduleData();
                    } else {
                        // Firestoreからデータを読み込み
                        const loadedData = {};
                        querySnapshot.docs.forEach(doc => {
                            loadedData[doc.id] = doc.data().classes || [];
                        });
                        
                        // 読み込んだデータでscheduleDataを更新
                        if (Object.keys(loadedData).length > 0) {
                            this.scheduleData = loadedData;
                        }
                    }
                } catch (error) {
                    console.error('スケジュールデータ読み込みエラー:', error);
                    // エラーの場合は初期データを使用
                }
            }
            async saveScheduleData() {
                try {
                    // 各曜日のデータをFirestoreに保存
                    for (const day of Object.keys(this.scheduleData)) {
                        const docRef = doc(db, 'schedule', day);
                        await setDoc(docRef, {
                            classes: this.scheduleData[day]
                        });
                    }
                } catch (error) {
                    console.error('スケジュールデータ保存エラー:', error);
                }
            }
            async addCustomer() {
                if (!this.newCustomer.lastName || !this.newCustomer.firstName) {
                    alert('氏名を入力してください');
                    return;
                }
                if (!this.newCustomer.memberNumber) {
                    alert('会員番号を入力してください');
                    return;
                }
                try {
                    await addDoc(collection(db, 'customers'), this.newCustomer);
                    await this.loadCustomers();
                    this.newCustomer = this.getEmptyCustomer();
                    this.showAddForm = false;
                    this.render();
                    alert('登録しました');
                } catch (error) {
                    console.error('登録エラー:', error);
                    alert('登録エラー: ' + error.message);
                }
            }
            async saveEdit() {
                if (!this.editForm.id) {
                    alert('保存エラー: IDが見つかりません');
                    return;
                }
                try {
                    const customerRef = doc(db, 'customers', this.editForm.id);
                    const { id, ...dataToSave } = this.editForm;
                    await updateDoc(customerRef, dataToSave);
                    await this.loadCustomers();
                    this.editingId = null;
                    this.editForm = {};
                    this.render();
                    alert('更新しました');
                } catch (error) {
                    console.error('更新エラー:', error);
                    alert('更新エラー: ' + error.message);
                }
            }
            async deleteCustomer(id) {
                if (!confirm('この顧客を削除してもよろしいですか?')) return;
                try {
                    await deleteDoc(doc(db, 'customers', id));
                    await this.loadCustomers();
                    this.render();
                    alert('削除しました');
                } catch (error) {
                    console.error('削除エラー:', error);
                    alert('削除エラー: ' + error.message);
                }
            }
            startEdit(id) {
                this.editingId = id;
                const customer = this.customers.find(c => c.id === id);
                if (customer) {
                    this.editForm = { ...customer };
                    this.render();
                }
            }
            cancelEdit() {
                this.editingId = null;
                this.editForm = {};
                this.render();
            }
            updateEditField(field, value) {
                this.editForm[field] = value;
            }
            handleExport() {
                const headers = ['No', '会員番号', '会員ステータス', 'コース', '年会費更新日', '氏名', '読み', '保護者名', 'ハコモノ登録名', '性別', '生年月日', '年齢', '電話番号', 'メール', '入会日', '郵便番号', '都道府県', '市区町村', '番地', '建物・部屋番号', '備考'];
                const rows = this.customers.map((c, i) => [
                    i + 1, c.memberNumber || '', c.status, c.course, c.annualFee,
                    `${c.lastName} ${c.firstName}`, c.reading, c.guardianName, c.hakomonoName, c.gender,
                    c.birthDate, this.calculateAge(c.birthDate), c.phone1, c.email, c.joinDate,
                    c.postalCode, c.prefecture, c.city, c.address, c.building, c.memo
                ].map(f => `"${f || ''}"`).join(','));
                const csv = [headers.join(','), ...rows].join('\n');
                const blob = new Blob(['\uFEFF' + csv], { type: 'text/csv;charset=utf-8;' });
                const link = document.createElement('a');
                link.href = URL.createObjectURL(blob);
                link.download = `顧客管理_${new Date().toISOString().split('T')[0]}.csv`;
                link.click();
            }
            sortBy(field) {
                if (this.sortField === field) {
                    this.sortOrder = this.sortOrder === 'asc' ? 'desc' : 'asc';
                } else {
                    this.sortField = field;
                    this.sortOrder = 'asc';
                }
                this.render();
            }
            getFilteredCustomers() {
                const s = this.searchTerm.toLowerCase();
                let filtered = this.customers.filter(c => 
                    c.status === this.statusFilter &&
                    ((c.lastName || '').toLowerCase().includes(s) ||
                    (c.firstName || '').toLowerCase().includes(s) ||
                    (c.reading || '').toLowerCase().includes(s) ||
                    (c.course || '').toLowerCase().includes(s) ||
                    (c.phone1 || '').includes(s) ||
                    (c.email || '').toLowerCase().includes(s) ||
                    (c.memberNumber || '').includes(s))
                );
                filtered.sort((a, b) => {
                    let aVal = a[this.sortField] || '';
                    let bVal = b[this.sortField] || '';
                    if (this.sortOrder === 'asc') {
                        return aVal > bVal ? 1 : -1;
                    } else {
                        return aVal < bVal ? 1 : -1;
                    }
                });
                return filtered;
            }
            render() {
                const filteredCustomers = this.getFilteredCustomers();
                document.getElementById('app').innerHTML = `
                    <div style="display:flex;">
                        <aside class="sidebar">
                            <div class="sidebar-logo">
                                <h1>POSSE</h1>
                                <p style="text-transform:lowercase;letter-spacing:1.5px;">dance academy</p>
                            </div>
                            <nav>
                                <button id="homeTab" class="nav-item ${this.currentTab === 'home' ? 'active' : ''}">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
                                    <span>HOME</span>
                                </button>
                                <button id="customersTab" class="nav-item ${this.currentTab === 'customers' ? 'active' : ''}">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4-4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87"/><path d="M16 3.13a4 4 0 010 7.75"/></svg>
                                    <span>顧客管理</span>
                                </button>
                                <button id="attendanceTab" class="nav-item ${this.currentTab === 'attendance' ? 'active' : ''}">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/><path d="M8 14l2 2 4-4"/></svg>
                                    <span>出席名簿</span>
                                </button>
                                <div class="nav-section-label">スケジュール</div>
                                <button id="timeScheduleTab" class="nav-item ${this.currentTab === 'timeSchedule' ? 'active' : ''}">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                                    <span>タイムスケジュール</span>
                                </button>
                                <button id="monthlyScheduleTab" class="nav-item ${this.currentTab === 'monthlySchedule' ? 'active' : ''}">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
                                    <span>月間スケジュール</span>
                                </button>
                                <button id="instructorsTab" class="nav-item ${this.currentTab === 'instructors' ? 'active' : ''}">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4-4v2"/><circle cx="12" cy="7" r="4"/></svg>
                                    <span>講師プロフィール</span>
                                </button>
                            </nav>
                        </aside>
                        <main class="main-content">
                            ${this.currentTab === 'home' ? this.renderDashboard() :
                              this.currentTab === 'customers' ? this.renderCustomers(filteredCustomers) :
                              this.currentTab === 'attendance' ? this.renderAttendance() :
                              this.currentTab === 'timeSchedule' ? this.renderTimeSchedule() :
                              this.currentTab === 'monthlySchedule' ? this.renderMonthlySchedule() :
                              this.currentTab === 'instructors' ? this.renderInstructors() :
                              this.renderDashboard()}
                        </main>
                    </div>
                `;
                document.getElementById('homeTab')?.addEventListener('click', () => { this.currentTab = 'home'; this.render(); });
                document.getElementById('customersTab')?.addEventListener('click', () => { this.currentTab = 'customers'; this.render(); });
                document.getElementById('attendanceTab')?.addEventListener('click', () => { this.currentTab = 'attendance'; this.render(); });
                document.getElementById('timeScheduleTab')?.addEventListener('click', () => { this.currentTab = 'timeSchedule'; this.render(); });
                document.getElementById('monthlyScheduleTab')?.addEventListener('click', () => { this.currentTab = 'monthlySchedule'; this.render(); });
                document.getElementById('instructorsTab')?.addEventListener('click', () => { this.currentTab = 'instructors'; this.render(); });
                if (this.currentTab === 'customers') {
                    this.setupCustomerPageEvents();
                } else if (this.currentTab === 'attendance') {
                    this.setupAttendanceEvents();
                }
            }
            setupCustomerPageEvents() {
                document.getElementById('exportBtn')?.addEventListener('click', () => this.handleExport());
                document.getElementById('toggleAddFormBtn')?.addEventListener('click', () => { this.showAddForm = !this.showAddForm; this.render(); });
                document.getElementById('searchInput')?.addEventListener('input', (e) => { this.searchTerm = e.target.value; this.render(); });
                document.getElementById('addCustomerBtn')?.addEventListener('click', () => this.addCustomer());
                document.getElementById('cancelAddBtn')?.addEventListener('click', () => { this.showAddForm = false; this.render(); });
                
                ['入会中', '休会中', '退会済み'].forEach(status => {
                    document.getElementById(`status-${status}`)?.addEventListener('click', () => {
                        this.statusFilter = status;
                        this.render();
                    });
                });
                document.querySelectorAll('.sortable-header').forEach(header => {
                    header.addEventListener('click', () => {
                        this.sortBy(header.getAttribute('data-field'));
                    });
                });
                this.setupFormEvents();
                this.setupEditEvents();
            }
            setupFormEvents() {
                const fields = ['memberNumber', 'status', 'course', 'annualFee', 'lastName', 'firstName', 'reading', 'guardianName', 'hakomonoName', 'gender', 'birthDate', 'phone1', 'email', 'postalCode', 'prefecture', 'city', 'address', 'building', 'joinDate', 'memo'];
                fields.forEach(field => {
                    const el = document.getElementById(`new_${field}`);
                    if (el) {
                        el.addEventListener('change', (e) => { this.newCustomer[field] = e.target.value; });
                        el.addEventListener('input', (e) => { this.newCustomer[field] = e.target.value; });
                    }
                });
            }
            setupEditEvents() {
                document.querySelectorAll('[data-edit-action="start"]').forEach(btn => {
                    btn.addEventListener('click', () => {
                        this.startEdit(btn.getAttribute('data-id'));
                    });
                });
                document.querySelectorAll('[data-edit-action="delete"]').forEach(btn => {
                    btn.addEventListener('click', () => {
                        this.deleteCustomer(btn.getAttribute('data-id'));
                    });
                });
                document.getElementById('saveEditBtn')?.addEventListener('click', () => this.saveEdit());
                document.getElementById('cancelEditBtn')?.addEventListener('click', () => this.cancelEdit());
                const editFields = ['memberNumber', 'status', 'course', 'annualFee', 'reading', 'guardianName', 'hakomonoName', 'gender', 'birthDate', 'phone1', 'email', 'postalCode', 'prefecture', 'city', 'address', 'building', 'joinDate', 'memo'];
                editFields.forEach(field => {
                    const el = document.getElementById(`edit_${field}`);
                    if (el) {
                        el.addEventListener('change', (e) => { this.updateEditField(field, e.target.value); });
                        el.addEventListener('input', (e) => { this.updateEditField(field, e.target.value); });
                    }
                });
                const nameField = document.getElementById('edit_fullName');
                if (nameField) {
                    nameField.addEventListener('input', (e) => {
                        const parts = e.target.value.split(' ');
                        this.editForm.lastName = parts[0] || '';
                        this.editForm.firstName = parts[1] || '';
                    });
                }
            }
            renderDashboard() {
                const total = this.customers.length;
                const activeCount = this.customers.filter(c => c.status === '入会中').length;
                const pausedCount = this.customers.filter(c => c.status === '休会中').length;
                const withdrawnCount = this.customers.filter(c => c.status === '退会済み').length;

                const coursePrices = {
                    '１': 6000, '1': 6000,
                    '２': 10000, '2': 10000,
                    '３': 14400, '3': 14400,
                    '４': 18600, '4': 18600
                };
                const courseColors = { '４': '#5856d6', '4': '#5856d6', '３': '#0071e3', '3': '#0071e3', '２': '#34c759', '2': '#34c759', '１': '#ff9500', '1': '#ff9500' };

                const courseCounts = {};
                this.customers.filter(c => c.status === '入会中').forEach(c => {
                    if (c.course) courseCounts[c.course] = (courseCounts[c.course] || 0) + 1;
                });

                let totalRevenue = 0;
                Object.entries(courseCounts).forEach(([course, count]) => {
                    if (coursePrices[course]) totalRevenue += coursePrices[course] * count;
                });

                // ビジター売上計算
                let visitorVisits = 0;
                const currentMonth = this.selectedMonth || new Date().toISOString().slice(0, 7);
                const monthKey = currentMonth.replace('-', '');
                const visitorPlans = ['ビジター（会員）', 'ビジター（一般）', 'ビジター', 'ビジター(会員)', 'ビジター(一般)'];
                Object.keys(this.scheduleData || {}).forEach(day => {
                    if (day === 'イベント') return;
                    (this.scheduleData[day] || []).forEach(cls => {
                        (cls.students || []).forEach(s => {
                            if (visitorPlans.includes(s.plan)) {
                                const key = day + '_' + (cls.students.indexOf(s)) + '_' + s.lastName + '_' + s.firstName;
                                const att = this.attendanceData[key];
                                if (att) {
                                    Object.values(att).forEach(v => { if (v === '○') visitorVisits++; });
                                }
                            }
                        });
                    });
                });
                const visitorRevenue = visitorVisits * 2000;

                // 総クラス数・総生徒数
                let totalClasses = 0;
                let totalStudents = 0;
                Object.keys(this.scheduleData || {}).forEach(day => {
                    if (day === 'イベント') return;
                    const classes = this.scheduleData[day] || [];
                    totalClasses += classes.length;
                    classes.forEach(cls => { totalStudents += (cls.students || []).length; });
                });

                const now = new Date();
                const monthNames = ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'];

                return `
                    <div>
                        <div class="page-header">
                            <div>
                                <h2>HOME</h2>
                                <p class="subtitle">POSSE Dance Academy の概要</p>
                            </div>
                            <div class="date-badge">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
                                ${now.getFullYear()}年${monthNames[now.getMonth()]}
                            </div>
                        </div>

                        <div class="stat-grid">
                            <div class="stat-card">
                                <div class="stat-icon blue">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4-4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87"/><path d="M16 3.13a4 4 0 010 7.75"/></svg>
                                </div>
                                <div class="stat-label">総顧客数</div>
                                <div class="stat-value">${total}<span class="stat-unit">名</span></div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon green">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 11-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
                                </div>
                                <div class="stat-label">入会中</div>
                                <div class="stat-value" style="color:var(--green);">${activeCount}<span class="stat-unit">名</span></div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon orange">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="10" y1="15" x2="10" y2="9"/><line x1="14" y1="15" x2="14" y2="9"/></svg>
                                </div>
                                <div class="stat-label">休会中</div>
                                <div class="stat-value" style="color:var(--orange);">${pausedCount}<span class="stat-unit">名</span></div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon red">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>
                                </div>
                                <div class="stat-label">退会済み</div>
                                <div class="stat-value" style="color:var(--text-secondary);">${withdrawnCount}<span class="stat-unit">名</span></div>
                            </div>
                        </div>

                        <div class="content-grid">
                            <div class="content-card">
                                <div class="card-header">
                                    <h3 class="card-title">コース別内訳（入会中）</h3>
                                    <span class="card-action" onclick="app.currentTab='customers';app.render();">詳細 →</span>
                                </div>
                                ${Object.keys(courseCounts).length > 0 ?
                                    Object.entries(courseCounts).sort((a,b) => {
                                        const order = {'４':0,'4':0,'３':1,'3':1,'２':2,'2':2,'１':3,'1':3};
                                        return (order[a[0]]||9) - (order[b[0]]||9);
                                    }).map(([course, count]) => {
                                        const price = coursePrices[course] || 0;
                                        const subtotal = price * count;
                                        const color = courseColors[course] || 'var(--text-secondary)';
                                        return `
                                            <div class="revenue-row">
                                                <span class="rev-label"><span class="rev-dot" style="background:${color};"></span>コース ${course}</span>
                                                <div>
                                                    <div class="rev-amount">¥${subtotal.toLocaleString()}</div>
                                                    <div class="rev-detail">¥${price.toLocaleString()} × ${count}名</div>
                                                </div>
                                            </div>
                                        `;
                                    }).join('')
                                : '<p style="color:var(--text-secondary);font-size:14px;">データがありません</p>'}
                                ${Object.keys(courseCounts).length > 0 ? `
                                    <div class="revenue-total">
                                        <span class="rev-label">月謝合計</span>
                                        <span class="rev-amount">¥${totalRevenue.toLocaleString()}</span>
                                    </div>
                                ` : ''}
                            </div>

                            <div>
                                <div class="visitor-highlight" style="margin-bottom:20px;">
                                    <div class="vh-label">ビジター売上（今月）</div>
                                    <div class="vh-value">¥${visitorRevenue.toLocaleString()}</div>
                                    <div class="vh-detail">${visitorVisits}回 × ¥2,000（会員）</div>
                                </div>
                                <div class="content-card">
                                    <div class="card-header">
                                        <h3 class="card-title">今月の概要</h3>
                                    </div>
                                    <div class="revenue-row">
                                        <span class="rev-label">総クラス数</span>
                                        <span class="rev-amount">${totalClasses}</span>
                                    </div>
                                    <div class="revenue-row">
                                        <span class="rev-label">総生徒数（延べ）</span>
                                        <span class="rev-amount">${totalStudents}</span>
                                    </div>
                                    <div class="revenue-row">
                                        <span class="rev-label">練習会売上</span>
                                        <span class="rev-amount">¥0</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }
            renderCustomers(filteredCustomers) {
                const getSortIcon = (field) => {
                    if (this.sortField === field) return this.sortOrder === 'asc' ? '▲' : '▼';
                    return '⬍';
                };
                return `
                    <div>
                        <div class="page-header">
                            <div>
                                <h2>顧客管理</h2>
                                <p class="subtitle">会員情報の一覧と管理</p>
                            </div>
                            <div style="display:flex;gap:10px;">
                                <button id="exportBtn" class="btn btn-secondary">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                                    CSV
                                </button>
                                <button id="toggleAddFormBtn" class="btn btn-primary">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                                    ${this.showAddForm ? 'フォームを閉じる' : '新規登録'}
                                </button>
                            </div>
                        </div>

                        <div class="tab-nav">
                            <button id="status-入会中" class="tab-btn ${this.statusFilter === '入会中' ? 'active' : ''}">入会中 (${this.customers.filter(c => c.status === '入会中').length})</button>
                            <button id="status-休会中" class="tab-btn ${this.statusFilter === '休会中' ? 'active' : ''}">休会中 (${this.customers.filter(c => c.status === '休会中').length})</button>
                            <button id="status-退会済み" class="tab-btn ${this.statusFilter === '退会済み' ? 'active' : ''}">退会済み (${this.customers.filter(c => c.status === '退会済み').length})</button>
                        </div>

                        <div class="search-bar">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
                            <input type="text" id="searchInput" placeholder="会員番号、氏名、コース、電話番号、メールで検索..." value="${this.searchTerm}">
                        </div>

                        ${this.showAddForm ? this.renderAddForm() : ''}
                        <div class="content-card" style="padding:0;overflow:hidden;">
                            <div style="overflow-x:auto;">
                                <table>
                                    <thead>
                                        <tr>
                                            <th style="width:50px;padding-left:20px;">No</th>
                                            <th class="sortable-header" data-field="memberNumber" style="width:80px;">会員番号<span class="sort-icon">${getSortIcon('memberNumber')}</span></th>
                                            <th class="sortable-header" data-field="status" style="width:100px;">ステータス<span class="sort-icon">${getSortIcon('status')}</span></th>
                                            <th class="sortable-header" data-field="course" style="width:80px;">コース<span class="sort-icon">${getSortIcon('course')}</span></th>
                                            <th class="sortable-header" data-field="annualFee" style="width:110px;">年会費更新日<span class="sort-icon">${getSortIcon('annualFee')}</span></th>
                                            <th class="sortable-header" data-field="lastName" style="width:140px;">氏名<span class="sort-icon">${getSortIcon('lastName')}</span></th>
                                            <th class="sortable-header" data-field="reading" style="width:140px;">読み<span class="sort-icon">${getSortIcon('reading')}</span></th>
                                            <th class="sortable-header" data-field="guardianName" style="width:110px;">保護者名<span class="sort-icon">${getSortIcon('guardianName')}</span></th>
                                            <th class="sortable-header" data-field="hakomonoName" style="width:110px;">ハコモノ登録名<span class="sort-icon">${getSortIcon('hakomonoName')}</span></th>
                                            <th class="sortable-header" data-field="gender" style="width:60px;">性別<span class="sort-icon">${getSortIcon('gender')}</span></th>
                                            <th class="sortable-header" data-field="birthDate" style="width:110px;">生年月日<span class="sort-icon">${getSortIcon('birthDate')}</span></th>
                                            <th style="width:60px;">年齢</th>
                                            <th class="sortable-header" data-field="phone1" style="width:130px;">電話番号<span class="sort-icon">${getSortIcon('phone1')}</span></th>
                                            <th class="sortable-header" data-field="email" style="width:200px;">メール<span class="sort-icon">${getSortIcon('email')}</span></th>
                                            <th class="sortable-header" data-field="joinDate" style="width:110px;">入会日<span class="sort-icon">${getSortIcon('joinDate')}</span></th>
                                            <th class="sortable-header" data-field="postalCode" style="width:100px;">郵便番号<span class="sort-icon">${getSortIcon('postalCode')}</span></th>
                                            <th class="sortable-header" data-field="prefecture" style="width:90px;">都道府県<span class="sort-icon">${getSortIcon('prefecture')}</span></th>
                                            <th class="sortable-header" data-field="city" style="width:110px;">市区町村<span class="sort-icon">${getSortIcon('city')}</span></th>
                                            <th class="sortable-header" data-field="address" style="width:140px;">番地<span class="sort-icon">${getSortIcon('address')}</span></th>
                                            <th class="sortable-header" data-field="building" style="width:140px;">建物・部屋番号<span class="sort-icon">${getSortIcon('building')}</span></th>
                                            <th style="width:300px;">備考</th>
                                            <th style="width:100px;">操作</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        ${filteredCustomers.map((c, i) => this.renderCustomerRow(c, i + 1)).join('')}
                                    </tbody>
                                </table>
                            </div>
                            <div style="padding:16px 24px;font-size:13px;color:var(--text-secondary);border-top:1px solid var(--border);">
                                ${this.statusFilter}: ${filteredCustomers.length}名
                            </div>
                        </div>
                    </div>
                `;
            }
            renderAddForm() {
                return `
                    <div class="content-card" style="margin-bottom:24px;background:rgba(0,113,227,0.03);border:2px solid rgba(0,113,227,0.1);">
                        <div class="card-header">
                            <h3 class="card-title">新規顧客登録</h3>
                        </div>
                        <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:20px;">
                            <div><label style="display:block;font-size:12px;font-weight:600;color:var(--text-secondary);margin-bottom:6px;letter-spacing:0.3px;">会員番号 *</label><input type="text" id="new_memberNumber" class="form-input" style="width:100%;" placeholder="例: 0001"></div>
                            <div><label style="display:block;font-size:12px;font-weight:600;color:var(--text-secondary);margin-bottom:6px;letter-spacing:0.3px;">会員ステータス</label><select id="new_status" class="form-input" style="width:100%;"><option value="入会中">入会中</option><option value="休会中">休会中</option><option value="退会済み">退会済み</option></select></div>
                            <div><label style="display:block;font-size:12px;font-weight:600;color:var(--text-secondary);margin-bottom:6px;letter-spacing:0.3px;">コース</label><select id="new_course" class="form-input" style="width:100%;"><option value="">選択してください</option><option value="ビジター">ビジター</option><option value="１">１</option><option value="２">２</option><option value="３">３</option><option value="４">４</option></select></div>
                            <div><label style="display:block;font-size:12px;font-weight:600;color:var(--text-secondary);margin-bottom:6px;letter-spacing:0.3px;">年会費更新日</label><input type="date" id="new_annualFee" class="form-input" style="width:100%;"></div>
                            <div><label style="display:block;font-size:12px;font-weight:600;color:var(--text-secondary);margin-bottom:6px;letter-spacing:0.3px;">氏名(姓"{able-header" data-field="r></t"new_annualFee" class="form-i��ut" style="width:100%;"></div>
       nts || []             <div><label style="display:block;font-size:12px;font-weight:600;color:var(--text-secondary);margin-bottom:6px;letter-spacing:0.3px;">氏名(姓"{able-header" data-field="r></t"new_annualFee" classyle="wistyle="width:100%;"></div>
       ader" dat           <div><label style="display:block;font-size:12px;font-weight:600;color:var(--text-secondary);margin-bottom:6px;letter-spacing:0.3px;">氏名(姓"{able-header" data-field="r></t"new_annualFee" class"width:140px;style="width:100%;"></div>
       header" data-f           <div><label style="display:block;font-size:12px;font-weight:600;color:var(--text-secondary);margin-bottom:6px;letter-spacing:0.3px;">氏名(姓"{able-header" data-field="r></t"new_annualFee" classx;">保護者名<span style="width:100%;"></div>
       ld="guardianNa           <div><label style="display:block;font-size:12px;font-weight:600;color:var(--text-secondary);margin-bottom:6px;letter-spacing:0.3px;">氏名(姓"{able-header" data-field="r></t"new_annualFee" class">ハ�済み</option></selectonoName"                            <div><label style="display:block;f="width:100%;"><option v男 sty�="width:100%;"><option v女on ��選択してください</option><option value="ビジター">ビジター</option><option value="１">１</option><option value="２">２</option><option value="３">３</option><optiontyle="width:6ption></select></div>
            le-header"            <div><label style="display:block;font-size:12px;font-weight:600;color:var(--text-secondary);margin-bottom:6px;letter-spacing:0.3px;">氏名(姓"{able-header" data-field="r></t"new_annualFee" classan></th>
    style="width:100%;"></l          getSortI           <div><label style="display:block;font-size:12px;font-weight:600;colabel sty           :地<s2y:bl:var(--text-secondary);margin-bottom:6px;letter-spacing:0.3px;">氏名(姓"{able-header" data-field="r></t"new_annualFee" classx;"width:1style="width:100%;">er" dat        er" dat           <div><label style="display:block;font-size:12px;font-weight:600;color:var(--text-secondary);margin-bottom:6px;letter-spacing:0.3px;">氏名(姓"{able-header" data-field="r></t"new_annualFee" classle="width:ption></select></div>
            -header" d           <div><label style="display:block;font-size:12px;font-weight:600;color:var(--text-secondary);margin-bottom:6px;letter-spacing:0.3px;">氏名(姓"{able-header" data-field="r></t"new_annualFee" classidth:110px;">style="width:100%;"></div>
       r" data-fiel           <div><label style="display:block;font-size:12px;font-weight:600;color:var(--text-secondary);margin-bottom:6px;letter-spacing:0.3px;">氏名(姓"{able-header" data-field="r></t"new_annualFee" classid00px;">郵�style="width:100%;"></div>
       rfield="post           <div><label style="display:block;font-size:12px;font-weight:600;color:var(--text-secondary);margin-bottom:6px;letter-spacing:0.3px;">氏名(姓"{able-header" data-field="r></t"new_annualFee" class"width:90px;"style="width:100%;"></div>
       a-fiel           <div><label style="display:block;font-size:12px;font-weight:600;color:var(--text-secondary);margin-bottom:6px;letter-spacing:0.3px;">氏名(姓"{able-header" data-field="r></t"new_annualFee" classe="widtstyle="width:100%;"></div>
       header" d           <div><label style="display:block;font-size:12px;font-weight:600;color:var(--text-secondary);margin-bottom:6px;letter-spacing:0.3px;">氏名(姓"{able-header" data-field="r></t"new_annualFee" classyle="width:140px;">番style="width:100%;"></div>
       header" da           <div><label style="display:block;font-size:12px;font-weight:600;colabel sty           :地<s3y:bl:var(--text-secondary);margin-bottom:6px;letter-spacing:0.3px;">氏名(姓"{able-header" data-field="r></t"new_annualFee" classader" dapx;margin-bottom:20px;">
           oda           <div><label style="display:block;font-size:12px;font-weight13,227,0.03);border:2px solid rgba(0,113,227,0.1);"          <h2>顧客管理</h2>
             d="status-�is.render(); } 12 15 17 10"/><line x1="1rgin-bot                           <button id="status-�.searchTerm ss="subtitle">会員情報�キャ・炻th:1s               <button id="status-退�   <button id="status-退�   <button id="s¥0</span>
                                            , no                        </      B                                <div class='}">�会中     -休会中                     <' ? 'active' :�会中     -vg>
  中 (�会中     -         s(filteredCustomers    </di                     di         <ty�ve' :di    -mal�中          di         < ��ve' :di    -femal�中  (e) => {
                 geCount = talcu    Age         .le-headerdCustomerBtn')?.addEventListener('cl         meFialFI</div>        .i) => { this.updateEditFie                           const <trs="subtit      b hv>

:bg-gray-50顧客管理</h2>
             dtdsortFieldx-2 py-3iconno}</tstyle="width:300px;">備考</thdtdsortFieldx-2 py-3icgin-bottom:20px;">
                       line x1="21" ymeField.a            ut', (}ss="subtiw-     t         </ed dx-1 py-1 (姓"x" d
   tstyle="width:300px;">備考</thdtdsortFieldx-2 py-3icgoption></se                    w-     t         </ed dx-1 py-1 (姓"x" play:block;font-size:12px; ="21" ymeField.a           <div class='}">�course]中 (${font-weight:600;color:var(--text-secondary); ="21" ymeField.a           <' ? 'active' :�course]中 (${fargin-bottom:6px;letter-spacing:0.3px;">会員 ="21" ymeField.a           < 'active' : ''}">�course]中 (${f��テータス</label><select idtstyle="width:300px;">備考</thdtdsortFieldx-2 py-3icgoption></se     ></div>
       w-     t         </ed dx-1 py-1 (姓"x" play:block;font-:block;f="width:100%;"><option vtext-secondar ="21" ymeField.a></divクラ� || new Date'}">�course]中 (${f);margin-bottom:6px;letter-spacing:0.3px ="21" ymeField.a></divクラseCo'}">�course]中 (${f">コース</label><select id=" ="21" ymeField.a></divクラse�o'}">�course]中 (${f">_course" class="form-input" s ="21" ymeField.a></divクラse�o'}">�course]中 (${f">e="width:100%;"><option value ="21" ymeField.a></divクラse�o'}">�course]中 (${f">>選択してくだ�tstyle="width:300px;">備考</thdtdsortFieldx-2 py-3icgin-bottom:20>
                        line x1="21" ymeField.a         ut', (}ss="subtiw-     t         </ed dx-1 py-1 (姓"x" d
   tstyle="width:300px;">備考</thdtdsortFieldx-2 py-3icgin-bottom:20px;">
                   line x1="21" ymeField.a        ut', (} ="21" ymeField.addEventList', (}ss="subtiw-     t         </ed dx-1 py-1 (姓"x" d
   tstyle="width:300px;">備考</thdtdsortFieldx-2 py-3icgin-bottom:20px;">
         ader" datline x1="21" ymeField.aader" dst', (}ss="subtiw-     t         </ed dx-1 py-1 (姓"x" d
   tstyle="width:300px;">備考</thdtdsortFieldx-2 py-3icgin-bottom:20px;">
         header" data-fline x1="21" ymeField.aheader" datast', (}ss="subtiw-     t         </ed dx-1 py-1 (姓"x" d
   tstyle="width:300px;">備考</thdtdsortFieldx-2 py-3icgin-bottom:20px;">
         ld="guardianNaline x1="21" ymeField.ald="guardianut', (}ss="subtiw-     t         </ed dx-1 py-1 (姓"x" d
   tstyle="width:300px;">備考</thdtdsortFieldx-2 py-3icgoption></se     onoName"       w-     t         </ed dx-1 py-1 (姓"x" play:block;font-:b-="width:100%;"><option v男  ="21" ymeField.adi         <ty�ve' :�course]中 (${fty�="width:100%;"><option v女o ="21" ymeField.adi         < ��ve' :�course]中 (${fo��選択してくだ�tstyle="width:300px;">備考</thdtdsortFieldx-2 py-3icgin-bottom:20>
             le-header" line x1="21" ymeField.ale-headerut', (}ss="subtiw-     t         </ed dx-1 py-1 (姓"x" d
   tstyle="width:300px;">備考</thdtdsortFieldx-2 py-3 (姓"cent    ilter(c alcu    Age 21" ymeField.ale-header)}</tstyle="width:300px;">備考</thdtdsortFieldx-2 py-3icgin-bottom:20pxl           getSortIline x1="21" ymeField.agetSorst', (}ss="subtiw-     t         </ed dx-1 py-1 (姓"x" d
   tstyle="width:300px;">備考</thdtdsortFieldx-2 py-3icgin-bottom:20er" dat         er" datline x1="21" ymeField.aer" dst', (}ss="subtiw-     t         </ed dx-1 py-1 (姓"x" d
   tstyle="width:300px;">備考</thdtdsortFieldx-2 py-3icgin-bottom:20>
             -header" dline x1="21" ymeField.a-header"st', (}ss="subtiw-     t         </ed dx-1 py-1 (姓"x" d
   tstyle="width:300px;">備考</thdtdsortFieldx-2 py-3icgin-bottom:20px;">
         r" data-fielline x1="21" ymeField.ag" data-fist', (}ss="subtiw-     t         </ed dx-1 py-1 (姓"x" d
   tstyle="width:300px;">備考</thdtdsortFieldx-2 py-3icgin-bottom:20px;">
         rfield="postline x1="21" ymeField.agfield="post', (}ss="subtiw-     t         </ed dx-1 py-1 (姓"x" d
   tstyle="width:300px;">備考</thdtdsortFieldx-2 py-3icgin-bottom:20px;">
         a-fielline x1="21" ymeField.aa-fist', (}ss="subtiw-     t         </ed dx-1 py-1 (姓"x" d
   tstyle="width:300px;">備考</thdtdsortFieldx-2 py-3icgin-bottom:20px;">
         header" dline x1="21" ymeField.a eader"st', (}ss="subtiw-     t         </ed dx-1 py-1 (姓"x" d
   tstyle="width:300px;">備考</thdtdsortFieldx-2 py-3icgin-bottom:20px;">
         header" daline x1="21" ymeField.aleader" ut', (}ss="subtiw-     t         </ed dx-1 py-1 (姓"x" d
   tstyle="width:300px;">備考</thdtdsortFieldx-2 py-3    o"cel-sec(姓aade
            oss="subtiw-     t         </ed dx-1 py-1 (姓"x" drows     ="21" ymeField.a   out', (}  t姓aade   tstyle="width:300px;">備考</thdtdsortFieldx-2 py-3icgorm() {
                 gap-eigh="status-休    btn.ad-btn ${thi姓" 11.0-600 hv>

:i姓" 11.0-800 (姓"x" p保存1s       d="status-�.searc btn.ad-btn ${thi姓" 1ay-600 hv>

:i姓" 1ay-800 (姓"x" pキャ・炻th:1s       d="statu       btn.addEventListen        x1="        .i)}-btn ${thi姓"red-600 hv>

:i姓"red-800 (姓"x" p削除1s       d-退�  tstyle="width:300px;">備考                          etail">¥${price.to                  {filteredCustomers.length}名
trs="subtit      b hv>

:bg-gray-50顧客管理</h2>
         dtdsortFieldx-2 py-3iconno}</tstyle="width:300px;">備考dtdsortFieldx-2 py-3 etterguaricon        .            ut', (}</tstyle="width:300px;">備考dtdsortFieldx-2 py-3secondary)';
  dx-2 py-1    </ed (姓"x" ettersemibold ="      B         }icon        .       t', (}</}</span>style="width:300px;">備考dtdsortFieldx-2 py-3seon        .></div�t', (}</tstyle="width:300px;">備考dtdsortFieldx-2 py-3seon        .         ut', (}</tstyle="width:300px;">備考dtdsortFieldx-2 py-3 etterg  bumseon        .        ut', (} ="        .ddEventList', (}</tstyle="width:300px;">備考dtdsortFieldx-2 py-3seon        .ader" dst', (}</tstyle="width:300px;">備考dtdsortFieldx-2 py-3seon        .header" datast', (}</tstyle="width:300px;">備考dtdsortFieldx-2 py-3seon        .ld="guardianut', (}</tstyle="width:300px;">備考dtdsortFieldx-2 py-3 (姓"cent   on">         }icon        .di     t', (}</tstyle="width:300px;">備考dtdsortFieldx-2 py-3seon        .le-headerut', (}</tstyle="width:300px;">備考dtdsortFieldx-2 py-3 (姓"cent  /></sge}</tstyle="width:300px;">備考dtdsortFieldx-2 py-3seon        .getSorst', (}</tstyle="width:300px;">備考dtdsortFieldx-2 py-3 er" d"cel-seon        .er" dst', (}</tstyle="width:300px;">備考dtdsortFieldx-2 py-3seon        .-header"st', (}</tstyle="width:300px;">備考dtdsortFieldx-2 py-3seon        .g" data-fist', (}</tstyle="width:300px;">備考dtdsortFieldx-2 py-3seon        .gfield="post', (}an>style="width:300px;">備考dtdsortFieldx-2 py-3seon        .>-fist', (}</tstyle="width:300px;">備考dtdsortFieldx-2 py-3seon        . eader"st', (}</tstyle="width:300px;">備考dtdsortFieldx-2 py-3seon        .leader" ut', (}</tstyle="width:300px;">備考dtdsortFieldx-2 py-3    o"cel-seon        .   out', (}</tstyle="width:300px;">備考dtdsortFieldx-2 py-3sec="statu       btn.addEven dartn        x1="        .i)}-btn ${thi姓"    -600 hv>

:i姓"    -800 (姓"x" p編集1s       d-tstyle="width:300px;">�                      ¥0</span>
                  ss="        Byf (d(ント')his.statusFilter}: ${filterorEach(cler();">� ��細 →</span>
                �itle��Colo��正規化tent-��">${字o��半�"に変換）��</span>
           eData[darmalizef (d    �ン�'４':0,'4':0,'３':1,'3':1,'�{filter�ン��ター�/[０-９]/g, (s�'４margin.fromChara-fi(s.chara-fiAt(0rseC0xFEE0)t) {
                   ) {
                  ��</span>
           eData[�ンA] ||armalizef (d(a��ン�
                let totalCl�ンB] ||armalizef (d(b��ン�
                let t                let totalCl     ACount = �ンdiv>
[�ンA     999
                let totalCl     BCount = �ンdiv>
[�ンB     999
                let t{filter     AC-l     B                Object.values(att)                         �itle��ten毎   引き継ぐ）かどうかを判定             isRegulaif (d �ン�'                      </regulaif (dlasses.d-title">| []１d-title">| []2d-title">| []２d-title">| []3d-title">| []３d-title">| []4d-title">| []４d-title">| []1.5hd-title">|tudents = 0;
      {filterregulaif (dly === 'イ�ン�
                              lock;fon�れたcle cx=div>
   表示   みo���">�             up>
  Scourse]        Infothis.statusFilter}: $    </ course]InfoCtteain     documch(="18Elemch(ById(:�course]        Info'                 totalCla�ンScours   documch(="18Elemch(ById(:      Each(_�ン'                 totalClanian0 0 2Ctteain     documch(="18Elemch(ById(:nian0 0 2Ctteain  '                 totalCla�ンScoursCtteain     documch(="18Elemch(ById(:�ンScoursCtteain  '                 toEventListener('cl    ! course]InfoCtteain  ��徒数
                lEventListener('cl         �course]        For        => { this.updateEditFie course]InfoCtteain  y =n  HTML                       const <orm() {
   mb-3 p-3 bg-gr1.0-50 t     -2 t     -gr1.0-400    </ed (姓"smolor:var(--text-secondary);">${withdrawnCou     items"cent   j   ify-betwat-value">${total}<span class="stat-un                                          withdrawnCou tterbold i姓" 11.0-800">✓ lock;f中:         course]        For       .        }         course]        For       .ddEventLiottom:20px;">
                                    <div c(姓"x" i姓" 1ay-700 mt-eig0px;">
                                          course]        For       .            u? `at(4,1fr);ga:         course]        For       .            } |>月謝合計</span>
                                    course]        For       .ader" ds? `yle="w:         course]        For       .ader" d} |>月謝合計</span>
                            ��">退�:         course]        For       .></div�t', なし�合計</span>
                                                            <div class="vh-value">¥${visitorRevenue.to="statu��計</span>
                        s-�.learScourse]        "��計</span>
                        tn ${thi姓"red-600 hv>

:i姓"red-800 (姓"x"  </er    ig0px;">
                              lock;f解除                              <div "5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
        9" y2="12"/></svg>
 etail">¥${price.toLoca��</span>
              姓Col入力欄ll="��表示��</span>
               nian0 0 2Ctteain   => { this.updateEditFieeeeenian0 0 2Ctteain  .tn ${List. ea('"${thi'                 totFieeeeenian0 0 2Ctteain  .tn ${List.r  ove-icol_annn-2| []    | []        s-2| [] ap-3'                 totFie合計</span>
        ��</span>
                �itle��炻th�d-tit    %;" olde� cy=��調整��</span>
               �ンScoursCtteain   => { this.updateEditFieeeee�ンScoursCtteain  .tn ${List. ea('col_annn-3'                 totFie合計</span>
        ��</span>
              lock;f解除ボin-bo�   %;�ベbo� t  ��再設定                     documch(="18Elemch(ById(:.learScourse]        ')?. eaEvch(Listen  (:.lick| [(�'４':0,'4':0,'３':1,'3':1,'�      course]        For       ] ||ull                totFieeeee            S="21" x2=] | (e) => {
          tFieeeee            S="21"Resultlassetudents = 0;
      tFieeeee     up>
  Scourse]        Infothudents = 0;
      tFieeeee    " r="入力欄ll=d-tit�アdents = 0;
      tFieeeee    </ cox="0 0 2   documch(="18Elemch(ById(:� Each(_ cox="_in-bo'                 totFieeeee     cox="0 0 2)/ cox="0 0 2.line ] | (e) => {
          tFieeeee    " r="結果ll=d-tit�アdents = 0;
      tFieeeee     up>
  Sc"21"Resultlthudents = 0;
      tFieeeee     �itle��炒it�セth� t                totFieeeee    �ンScours)e�ンScours.line ] | (e) => {
          tFieject.values(att)))))))))��</span>
                �itle��炒自動設定                         �ンScours &&�      course]        For       .></div => { this.updateEditFieeeeet]) => {/divMap       �':[]１d-title">| []ject.[]２d-title">| []     []３d-title">| []     []４d-title">|ngth > 0 ?
                talCla�ンVine ] | {/divMap[      course]        For       .></div      (e) => {
          tFieeeee    �ンVine )e�ンScours.line ] |�ンVine                 totFie合計</span>
    } eliv�> { this.updateEditFie course]InfoCtteain  y =n  HTML    (e) => {
          tFie��</span>
              姓Col入力欄ll=表示��</span>
               nian0 0 2Ctteain   => { this.updateEditFieeeeenian0 0 2Ctteain  .tn ${List.r  ove-i"${thi'                 totFieeeeenian0 0 2Ctteain  .tn ${List. ea('col_annn-2| []    | []        s-2| [] ap-3'                 totFie合計</span>
        ��</span>
                �itle��炻th�d-tit    %;" olde� cy=��元に戻す��</span>
               �ンScoursCtteain   => { this.updateEditFieeeee�ンScoursCtteain  .tn ${List.r  ove-icol_annn-3'                 totFie合計</span>
    合計</span>
                  " r="結果l  みo���">�（ 0 24 24" ��%;" o�維持）��</span>
   up>
  Sc"21"Resultlth'                      </resultlCtteain     documch(="18Elemch(ById(:�c"21"ResultlCtteain  '                 to    !resultlCtteain  ��徒数
                l         �      S="21"Resultl       }).j => { this.updateEditFie  sultlCtteain  y =n  HTML                       const <orm() {
   mt-2 t         </ed bg-whiterorEach(-Filter   sultl shadow-lgig0px;">
                                    S="21"Resultl �</t        '４('')
                             <orm(0px;">
                                    cours-           x1="        .i)}-��計</span>
                        tn ${th cours-         tle"p-2 hv>

:bg-    -50 c/dior-ary">  't      b     :t      b-0 (姓"sm transi                                           withdrawnCou tterg  bum i姓"    -600ig0px;">
                                            .        } ="        .ddEventLi合計</span>
                                      .            u? `condary)';
  (姓"x" i姓" 1ay-500 ml-2">[          .            }]</}</sp月謝合計</span>
                        ttom:20px;">
                                    <div c(姓"x" i姓" 1ay-600 mt-eig0px;">
                                            .ader" ds? `yle="w:           .ader" d}月謝合計</span>
                                      .ader" ds&&�        .></div�? '    ��謝合計</span>
                                      .></div�? `��">退�:           .></div}月謝合計</span>
                                                            <div class="vh-value">¥${visitorReven` </tr>
                                    9" y2="12"/></svg>
 etail">¥${price.toLoca��</span>
               " r="結果l  �-tit��h� -ti;�ベbo� t  ��再設定                       sultlCtteain  yqueryScoursorAll('. cours-         tle').forEach(tle"４':0,'4':0,'３':1,'3':1,'�tle. eaEvch(Listen  (:.lick| [(�'４':0,'4':0,'３':1,'3':1,'�����t]) =>        Id   tle."18Attribute-i      cours-           '                 totFieeeee����t]) =>        Count = t=> c.statusnd '休会i</div>        Id                 totFieeeee����             => { this.updateEditFieeeeeeeeeeeee      cours        For                                 totFieeeee����                          ject.values(att)))))))))ject.values(att)))))} eliv�         �      S="21" x2=.trim() => { this.updateEditFie  sultlCtteain  y =n  HTML                       const <orm() {
   mt-2 p-2 bg-yel    50 t     't      yel    200    </ed (姓"x" i姓"yel    800ig0px;">
                      ⚠️ 該当するcle cxが見つか�iv>
      でont-s�                                9" y2="12"/></svg>
 etail">¥${price.to} eliv�> { this.updateEditFie  sultlCtteain  y =n  HTML    (e) => {
          合計</span>
                 ひらがな→ ��%;� ��%��変換             hiraganaToK   kana(st  => { this.updateEdi{filterorr��ター�/[\u3041-\u3096]/g, (match�'４':0,'4':0,'３':1,'3':t]) => h Coumatch.chara-fiAt(0rs+ 0x60
                let t{filtermargin.fromChara-fi( h ect.values(att)))))}�
                               ��%;� ��%��→ ��らがな変換             k   kanaToHiragana(st  => { this.updateEdi{filterorr��ター�/[\u30a1-\u30f6]/g, (match�'４':0,'4':0,'３':1,'3':t]) => h Coumatch.chara-fiAt(0rs- 0x60
                let t{filtermargin.fromChara-fi( h ect.values(att)))))}�
                              cle cx=" r="機能tent��化版）��</span>
   Filterrender();yntLi(1="21" x2=h'                      </tx2=] |s="21" x2=.toLowerCase().trim()                to    !tx2=h'                  et t{filteretudents = 0;
                                            ひらがな・ ��%;� ��%��両方="11" r="でon�るように                     </tx2=HiraganaCount = k   kanaToHiragana(tx2=h                totalClatx2=K   kanaCount = hiraganaToK   kana(tx2=h                to { this.updateEdi{filterter(c => c.status === '休�→</span>
              ="formtent��Col別々・ 0 2��%��24" fi）��</span>
           eData[        u=   .        ut', ().toLowerCase()
                let totalClddEventLis=   .ddEventList', ().toLowerCase()
                let totalCld           ${        }  </EventLi�etail">¥${price.toLocaotalCld       WithSpー    ${        }   </EventLi�etail">¥${price.toLoca��</span>
              yle="w（ ��らがな・ ��%;� ��%��両対応）��</span>
           eData[ader" ds=   .ader" dst', ().toLowerCase()
                let totalClader" dHiraganaCount = k   kanaToHiragana(ader" d)
                let totalClader" dK   kanaCount = hiraganaToK   kana(ader" d)
                let t��</span>
              at(4,1fr);ga                let totalCl            u=   .            ut', ().toLowerCase()
                let t��</span>
              y��数l  条件="11" r="                 et t{filter        y === 'イtx2=h'||0px;">
                     </EventLiy === 'イtx2=h'||0px;">
                     <       y === 'イtx2=h'||0px;">
                     <       WithSpーy === 'イtx2=h'||0px;">
                     ader" dy === 'イtx2=h'||0px;">
                     ader" dy === 'イtx2=Hiraganah'||0px;">
                     ader" dy === 'イtx2=K   kanah'||0px;">
                     ader" dHiraganay === 'イtx2=h'||0px;">
                     ader" dHiraganay === 'イtx2=Hiraganah'||0px;">
                     ader" dK   kanay === 'イtx2=h'||0px;">
                     ader" dK   kanay === 'イtx2=K   kanah'||0px;">
                                 y === 'イtx2=hct.values(att)))))}�.slice(0, 10);      �大10件="
  �表示��</span>
                    cle cxll="ock;font-sityle��=div>
 ��自動入力��</span>
   Fiours        For                 �→</span>
             course]        For       ] |        ct.values(att)))))            S="21"Resultlassetudents = 0;
                  S="21" x2=] |`          .        } ="        .ddEventLi�etail">¥${price.to                     " r="入力欄ll=�">�                     </ cox="0 0 2   documch(="18Elemch(ById(:� Each(_ cox="_in-bo'                 to     cox="0 0 2)/> { this.updateEditFie cox="0 0 2.line ] |            S="21" x2=udents = 0;
                                             " r="結果ll=d-tit�アdents = 0;
           up>
  Sc"21"Resultlthudents = 0;
                          lock;fon�れたcle cx=div>
 l=表示��</span>
            up>
  Scourse]        Infothudents = 0;
                async add       To     (day, loca    ,() {
 ntLi �→</span>
             course]  {
 ForAdd   { day, loca    ,() {
 ntLi  ) {
              type="text"        id="s | re                 to      course]        For       ] ||ull                to            S="21" x2=] | (e) => {
                      S="21"Resultlassetudents = 0;
                 thudents = 0;
                async �   New         �→</span>
       lea[        , </EventLi,e�ンudents = 0;
                          lle cxがlock;fon�れていll�場�                to         �course]        For        => { this.updateEditFie        u=       course]        For       .        
                let tddEventLis=       course]        For       .ddEventLi
                let tp (d   documch(="18Elemch(ById(:      Each(_�ン' ?.line ]    (e) => {
          } eliv�> { this.updateEditFie        u= documch(="18Elemch(ById(:      Each(_l>${getSor?.line ]    (e) => {
          et tddEventLis= documch(="18Elemch(ById(:      Each(_ddEventLior?.line ]    (e) => {
          et tp (d   documch(="18Elemch(ById(:      Each(_�ン' ?.line ]    (e) => {
          }               to    !        ut',!ddEventList',!�ン�'                      alert('t��Colと  �itle��炒入力ont-size:12px;font'                 totFie徒数
                l}               to    </{ day, loca    ,() {
 ntLi  s=       course]  {
 ForAdd                totalCla) {
 I   xs=       cheduleD   [day]tusndI   x '休会loca    /div>loca    /&&� .ntLis=iv>  {
 ntLi ;
               to    ) {
 I   xs!iv>-1�'                          �xに%;" o�argi��width:に存在するかチェ�h� -t                let totalClexistlass      cheduleD   [day][) {
 I   x]        clerme(0px;">
                  s休�s.        udiv>l       u&&�s.ddEventLisdiv>ddEventLi0px;">
               ;
               to  to    !existl => { this.updateEditFieeeee    " sty追加 { this.updateEditFieeeee      cheduleD   [day][) {
 I   x]        clpush({[        , </EventLi,e�ン ject.values(att)))))))))eeee      cheduleD   [day][) {
 I   x]        cass      s="        Byf (d(      cheduleD   [day][) {
 I   x]        cect.values(att)))))))))eeeeawaits         ScheduleD   ()
                let t}
               to  to     margin-bot等l  非        �itle��l  場� 、当   l  出席デacehold��% �it�>退�ホ2��%��>退�作成ont-si表示  �れるようにする               to  to    !     isRegulaif (d �ン� => { this.updateEditFieeeeet]) =>       Key] |`  day}_${loca    }_${  {
 ntLi}_${l       }  </EventLi�etail">¥${price.toLoca  to    !     att   searD   [       Key] => { this.updateEditFieeeeeeeee     att   searD   [       Key]   {ngth > 0 ?
                  to   Fire   reに%;�保存ont-si永続化th > 0 ?
                  toawaits         Att   sear(       Key,/{ _休会:| re  ject.values(att)))))))))eeee                      合計</span>
    合計</span>
eeee     "text"        id="s |faliv                to      course]  {
 ForAdd   |ull                to      course]        For       ] ||ull                to            S="21" x2=] | (e) => {
                      S="21"Resultlassetudents = 0;
                 thudents = 0;
      alert('tyle�� l=追加ont-s�ont-s�'                                tyle�� ��編集ll="��始              dart btn        day, loca    ,() {
 ntLi,[        , </EventLi �→</span>
            meFialF       ] |{ day, loca    ,() {
 ntLi,[        , </EventLi  ) {
              type=      thudents = 0;
                   tyle��=div>
   保存             async �    btn        h'                      </   P (d   documch(="18Elemch(ById(:       Each(_�ン' ?.line                 to    !   P (d�'                      alert('  �itle��炒lock;font-size:12px;font'                 totFie徒数
                l}               to    </{ day, loca    ,() {
 ntLi,[        , </EventLi  ass     meFialF                       totalCla) {
 I   xs=       cheduleD   [day]tusndI   x '休会loca    /div>loca    /&&� .ntLis=iv>  {
 ntLi ;
              to               to    ) {
 I   xs!iv>-1�'                      t]) =>       I   xs=       cheduleD   [day][) {
 I   x]        clusndI   x 0px;">
                  s休�s.        udiv>l       u&&�s.ddEventLisdiv>ddEventLi0px;">
               ;
px;">
                             to  to           I   xs!iv>-1�'                                cheduleD   [day][) {
 I   x]        c[       I   x].p (d      P (dct.values(att)))))))))eeee      cheduleD   [day][) {
 I   x]        cass      s="        Byf (d(      cheduleD   [day][) {
 I   x]        cect.values(att)))))))))eeee { this.updateEditFieeeee   Fire   reに保存                         awaits         ScheduleD   ()
                let t}
           let t}
           let t     meFialF       ] ||ull                to           thudents = 0;
      alert('tyle��=div>
 l=�">�ont-s�ont-s�'                                tyle�� ��削除             async tListe        day, loca    ,() {
 ntLi,[        , </EventLi �→</span>
           !t])</Em( ${        }   </EventLi� 炒削除ont-siz��よろont-s�でon�か？`) => { this.updateEditFie  �数
                l}               to    </) {
 I   xs=       cheduleD   [day]tusndI   x '休会loca    /div>loca    /&&� .ntLis=iv>  {
 ntLi ;
              to               to    ) {
 I   xs!iv>-1�'                            cheduleD   [day][) {
 I   x]        cass      cheduleD   [day][) {
 I   x]        clus === 0px;">
                  s休�!(s.        udiv>l       u&&�s.ddEventLisdiv>ddEventLi)0px;">
               ;
px;">
                             to  to   Fire   reに保存                     awaits         ScheduleD   ()
                l}               to   出席デacehold��削除                 t]) =>       Key] |`  day}_${loca    }_${  {
 ntLi}_${l       }  </EventLi�etail">¥${price.tootalCl onthKey] |      course]Month��ター�'-| []'                 totry'                      awaitstListeDoc(doc(db, `att   sear_${ onthKey}`,>       Key)t) {
              } catch (erro  => { this.updateEditFieotalole�log('出席デacehold��削除エitle��（ 0�acehold��存在しない可能性があ�iv>
  �）'                 to}               toawaits     loadAtt   sear(                 tot          thudents = 0;
      alert('tyle�� l=削除ont-s�ont-s�'                              alcu    Visi  rRevenue  �→</span>
       lea[revenue] |0
                lotalCl onthKey] |      course]Month��ター�'-| []'                 to               toObjurs.keys(     att   searD   ).forEach(key] ��':0,'4':0,'３':1,'3':t]) =>att   sear] |     att   searD   [keytudents = 0;
      tFiet]) =>weeklassesweek1| []week2| []week3| []week4| []week5|tudents = 0;
        to               toooooweekl.forEach(week'４':0,'4':0,'３':1,'3':1,'�    att   sear[week]     <○' => { this.updateEditFieeeeeeeee   keyから  �itle��=div>
 l=取得する必要がある-s�め、 cheduleD   から1" r="                 et t    tFiet]) =>partlasskey.split('_'                 totFieeeee����t]) =>day] |�artl[0tudents = 0;
      tFieeeee����t]) =>loca    /d|�artl[1tudents = 0;
      tFieeeee����t]) =>) {
 ntLi d|�artl[2tudents = 0;
      tFieeeee����t]) =>       ntLi d|�artl.slice(3 </tr>
 _'                 totFieeeee����dents = 0;
      tFieeeee����t]) =>) {
 D   ass      cheduleD   [day]?tusnd '休会loca    /div>loca    /&&� .ntLis=iv>  {
 ntLi ;
              totFieeeee����t]) =>        =>) {
 D   ?        clusnd(s休�`  s.        }  s.</EventLi�es=iv>       ntLi                 totFieeeee����dents = 0;
      tFieeeee����     margin-bot、体験、無料  �itle��l  み売�iv>�計�idents = 0;
      tFieeeee����           /&&�        .p (dy === 'イ�� || new Dateh'||        .p (dy === 'イ�体験eh'||        .p (dy === 'イ�無料')� => { this.updateEditFieeeeeeeee����    nt = �riualF[       .p (d] => { this.updateEditFieeeeeeeeeeeeeeeeerevenue]+ount = �riualF[       .p (d]                totFieeeee��������合計</span>
                                          j                let t}ect.values(att)))))}�
                                  {filterrevenue                               t��習会d��売�i計算              alcu    Pr休�ceRevenue  �→</span>
       lea[totalPartiuapa  cass0
                lotalClweeklassesweek1| []week2| []week3| []week4| []week5|tudents = 0;
      t]) =>details   {ngth > 0 ?
        ['widt��日| []木t��日|].forEach(day] ��':0,'4':0,'３':1,'3':t]) =>key] |`t��習会_  day}etail">¥${price.toLocaotalCld   ass     att   searD   [keytudents = 0;
      tFielea[dayTotalass0
                lllll    d    => { this.updateEditFieeeeeweekl.forEach(week'４':0,'4':0,'３':1,'3':1,'�LocaotalClcou   =>�arseI   da  [week]h'|| 0
                llllllllllllldayTotala+=lcou  ct.values(att)))))))))eeee                  totFie合計</span>
        details[day]   dayTotal                totFietotalPartiuapa  ca+  dayTotal                to                  to{filter{|�artiuapa  c:etotalPartiuapa  c,rrevenue:etotalPartiuapa  c * 500,>details }                               詳細売�i計算tent-� ��%��ゴリ別）��</span>
    alcu    DetailedRevenue  �→</span>
       otalClc   gories   {               totFie't��習会':r{|cou  : 0,rrevenue:e0 },               totFie'� || new Dattenat(4,1）':r{|cou  : 0,rrevenue:e0 },               totFie'� || new Datten非at(4,1）':r{|cou  : 0,rrevenue:e0 },               totFie'� || new Dat1.5htenat(4,1）':r{|cou  : 0,rrevenue:e0 },               totFie'� || new Dat1.5hten非at(4,1）':r{|cou  : 0,rrevenue:e0 },               totFie'       -title">振替':r{|cou  : 0,rrevenue:e0 },               totFie'初回体験e:r{|cou  : 0,rrevenue:e0 },               totFie'初回無料':r{|cou  : 0,rrevenue:e0 }               to                 to   t��習会��</span>
       otalClpr休�ceCount = talcu    Pr休�ceRevenue  udents = 0;
      t   gories['t��習会']   {|cou  : pr休�ce.partiuapa  c,rrevenue:epr休�ce.revenue]                 to     margin-bot・体験系                lotalClweeklassesweek1| []week2| []week3| []week4| []week5|tudents = 0;
      Objurs.keys(     att   searD   ).forEach(key] ��':0,'4':0,'３':1,'3':    key.sdartsWith('t��習会_' ��徒数
    t��習会d��別処理��タ�:0,'4':0,'３':1,'3':t]) =>att   sear] |     att   searD   [keytudents = 0;
      tFieweekl.forEach(week'４':0,'4':0,'３':1,'3':1,'�    att   sear[week]     <○' => { this.updateEditFieeeeeeeeet]) =>partlasskey.split('_'                 totFieeeee����t]) =>day] |�artl[0tudents = 0;
      tFieeeee����t]) =>loca    /d|�artl[1tudents = 0;
      tFieeeee����t]) =>) {
 ntLi d|�artl[2tudents = 0;
      tFieeeee����t]) =>       ntLi d|�artl.slice(3 </tr>('_'                 totFieeeee����t]) =>) {
 D   ass      cheduleD   [day]?tusnd '休会loca    /div>loca    /&&� .ntLis=iv>  {
 ntLi ;
              totFieeeee����t]) =>        =>) {
 D   ?        clusnd(s休�`  s.        }  s.</EventLi�es=iv>       ntLi                 totFieeeee����           /&&�t   gories[       .p (d]s!iv> </eusne) => { this.updateEditFietFieeeee����t]) =>�riur] |     �riualF[       .p (d]'|| 0
                lllllllllllll����t   gories[       .p (d].cou  ++
                lllllllllllll����t   gories[       .p (d].revenue]+ou�riur
                lllllllllllll                          j                let t}ect.values(att)))))}�
                 {filtert   gories                               出席簿関連l  メソth� t���</span>
   async loadAtt   sear( �→</span>
        ry'                      otalCl onthKey] |      course]Month��ター�'-| []'                 to    otalClquerySnapsho  =>awaitsgetDocs(colours   (db, `att   sear_${ onthKey}`)t) {
                       att   searD      {ngth > 0 ?
            querySnapsho .docs.forEach(do'休�→</span>
                    att   searD   [do'.id]   doc.d   ()
                let t}t) {
              } catch (erro  => { this.updateEditFieotalole�erro ('出席デaceholyle="w込みo��itle��:| [erro  ) {
                       att   searD      {ngth > 0 ?
        合計</span>
                 �;�ベbo� t 専用l  出席デaceholyle="w込み��</span>
   async loadEvch(Att   sear( �→</span>
        ry'                      otalCl onthKey] |      course]Month��ター�'-| []'                 to    otalClquerySnapsho  =>awaitsgetDocs(colours   (db, `event_att   sear_${ onthKey}`)t) {
                       evch(Att   searD      etudents = 0;
      tFiequerySnapsho .docs.forEach(do'休�→</span>
               otalCld   assdoc.d   ()
                let t         evch(Att   searD   lpush({               totFieeeee���� d: do'.id,               totFieeeee���� sM     :ld   . sM     '|| faliv,               totFieeeee����...d   t.values(att)))))))))eeee                  totFie�                 totFie   a��び順ll=保持するため、i   xでo��th� t                totFie     evch(Att   searD   ler();">� ��細 (ay =  xs|| 0rs- (by =  xs|| 0rt) {
              } catch (erro  => { this.updateEditFieotalole�erro ('�;�ベbo� t 出席デaceholyle="w込みo��itle��:| [erro  ) {
                       evch(Att   searD      etudents = 0;
      合計</span>
                 �;�ベbo� t 出席デacehold��保存             async �    vch(Att   sear( �→</span>
        ry'                      otalCl onthKey] |      course]Month��ター�'-| []'                 to       全デacehold��保存teni   x�l=追加）��</span>
           for (lea[iass0
[ia<e     evch(Att   searD   l      
[i++ => { this.updateEditFieeeeet]) =>d   ass     evch(Att   searD   [itudents = 0;
      tFieeeeet]) =>docId   d   . ds|| `event_${der".now()}_${i�etail">¥${price.toLoca  tot]) =>docRefassdoc(db, `event_att   sear_${ onthKey}`,>docIdect.values(att)))))))))eeeeawaitssetDoc(docRef,=> { this.updateEditFietFieeeee sM     :ld   . sM     '|| faliv,               totFieeeee����        :ld   .        ut', (,               totFieeeee����</EventLi:ld   .ddEventList', (,               totFieeeee����week1:ld   .week1st', ×(,               totFieeeee����week2:ld   .week2st', ×(,               totFieeeee����week3:ld   .week3st', ×(,               totFieeeee����fei:ld   .d  ut',0,               totFieeeee����   o:ld   .   out', (,               totFieeeee����    x: it.values(att)))))))))eeee                  totFie����    !d   . d => { this.updateEditFieeeeeeeee     evch(Att   searD   [it�i</d>docIdct.values(att)))))))))eeee                totFie合計</span>
        awaits     load vch(Att   sear( ) {
              } catch (erro  => { this.updateEditFieotalole�erro ('�;�ベbo� t 出席デacehol保存o��itle��:| [erro  ) {
              合計</span>
                 �;�ベbo� t 参加者�l=追加             aeaEvch(Partiuapa  ( �→</span>
            evch(Att   searD   lpush({               totFie d: |ull,               totFie sM     :lfaliv,               totFie        :l (,               totFie</EventLi:l (,               totFieweek1:l ×(,               totFieweek2:l ×(,               totFieweek3:l ×(,               totFiefei:l0,               totFie   o:l''t.values(att)))))}�
                 type=      thudents = 0;
                   �;�ベbo� t 参加者�l=削除             async tListeEvch(Partiuapa  (    x �→</span>
           !t])</Em('こl  参加者�l=削除ont-siz��よろont-s�でon�か？') => { this.updateEditFie  �数
                l}               to��</span>
       otalClpartiuapa  ass     evch(Att   searD   [i   x]
                l    �artiuapa  . d => { this.updateEditFie ry'                          otalCl onthKey] |      course]Month��ター�'-| []'                 to        awaitstListeDoc(doc(db, `event_att   sear_${ onthKey}`,>�artiuapa  . d                  totFie� catch (erro  => { this.updateEditFie    otalole�erro ('削除エitle��:| [erro  ) {
                  }
           let t}
           let t��</span>
            evch(Att   searD   lspli���i   x, 1hudents = 0;
      awaits          vch(Att   sear( ) {
              type=      thudents = 0;
                   �;�ベbo� t l  合計金�lo��計算              alcu     vch(Total( �→</span>
       {filterter(cevch(Att   searD   lreduar((sum,>��細 sum +  �arseFloat(p.d  h'|| 0), 0)udents = 0;
                async �   Att   sear(       Id,eweekD    => { this.updateEdi ry'                      otalCl onthKey] |      course]Month��ター�'-| []'                 to    otalCldocRefassdoc(db, `att   sear_${ onthKey}`,>       Idect.values(att)))))))))awaitssetDoc(docRef,=weekD   ,/{ merg�:| re  ject.values(att)))))))))awaits     loadAtt   sear(                 to} catch (erro  => { this.updateEditFieotalole�erro ('出席デacehol保存o��itle��:| [erro  ) {
              合計</span>
              toggl Att   sear() {
 Id,eweek �→</span>
       otalClcurre  ass     att   searD   [) {
 Id]?.[week]     (e) => {
              </  x ] |  rre  as   <○'�? '×( :|  rre  as   <×( ? '休講( :|  rre  as   <休講( ? ' ���○'
                                      !     att   searD   [) {
 Id]�'                           att   searD   [) {
 Id]   {ngth > 0 ?
        合計</span>
         att   searD   [) {
 Id][week]  /  x 
                                           Att   sear() {
 Id,e     att   searD   [) {
 Id]�) {
              type=      thudents = 0;
                "18Att   searR   () {
 Id �→</span>
       otalCld   ass     att   searD   [) {
 Id]    {ngth > 0 ?
        otalClweeklassesweek1| []week2| []week3| []week4|]
    予備�
 l=除外th > 0 ?
        t]) =>att   e</d>weekl.fs === w細 da  [w]     <○' l      
th > 0 ?
        t]) =>rec    </d>weekl.fs === w細 da  [w]     <○'    da  [w]     <×( l      
    at�講 l=除外th > 0 ?
        {filterrec    </> 0 ? Math��  </((att   e<//rrec    <) * 100)���0udents = 0;
                      切り替え機能d��修正             async changeMonth(dirurs    �→</span>
            isLoer" ds=  re                 to           thudents = 0;
       { this.updateEdi ry'                         t��在の年   ll=取得               to    otalCl[  rre  Year,|  rre  Month]] |      course]Month�split('-( l�</t       ;
px;">
                             to  to   >�ont-s�年   ll=計算                     lea[newYear] |  rre  Yearudents = 0;
      tFielea[newMonth] |  rre  Month]+ dirurs   ;
px;">
                             to  to   >  l  範囲チェ�h� -tと年   調整��</span>
               newMonth]> 12 => { this.updateEditFieeeeenewMonth] |1                to        newYear++
                lllll} eliv�    newMonth]< 1�'                          newMonth] |12                to        newYear--                totFie合計</span>
                       to  to   YYYY-MM形式に変換（>  l �2桁に%;�ロパデa��e��炰）��</span>
                 course]Month] |`  newYear}-${margin newMonth).padSdart(2 []0')�etail">¥${price.toLoca��</span>
           awaits     loadAtt   sear(                 to    awaits     load vch(Att   sear( ) {
              } catch (erro  => { this.updateEditFieotalole�erro ('   切り替えo��itle��:| [erro  ) {
              � finally'                           isLoer" ds= faliv                to               thudents = 0;
      合計</span>
                    ll=直接lock;f             async �coursMonth( onthVine )e→</span>
           ! onthVine )e徒数
                lEventListener('cl     isLoer" ds=  re                 to      course]Month] | onthVine                 to           thudents = 0;
       { this.updateEdi ry'                      awaits     loadAtt   sear(                 to    awaits     load vch(Att   sear( ) {
              } catch (erro  => { this.updateEditFieotalole�erro ('   lock;fo��itle��:| [erro  ) {
              � finally'                           isLoer" ds= faliv                to               thudents = 0;
      合計</span>
                 i;�ベbo� t  �title">追加機能             aea  {
 To vch(( �→</span>
            "text"   {
 For"s | re                 to           thudents = 0;
                async �   New     ( �→</span>
       otalClc {
 ntLi d|documch(="18Elemch(ById(:    c {
 _ntLior?.line ]    (e) => {
          t]) =>loca    /d|documch(="18Elemch(ById(:    c {
 _loca    or?.line ]    天神(e) => {
          t]) =>colo    documch(="18Elemch(ById(:n   c {
 _colo or?.line ]    red(e) => {
              !t {
 ntLi �→</span>
           alert(' �title">Colo��入力ont-size:12px;font'                 totFie徒数
                l}               to      cheduleD   ['�;�ベbo� t ']lpush({               totFieloca    ,               totFientLi:l) {
 ntLi, { this.updateEditFieotlo , { this.updateEditFie       c: []t.values(att)))))}�
                                     Fire   reに保存                 awaits         ScheduleD   ()
                l��</span>
            "text"   {
 For"s |faliv                to           thudents = 0;
      alert(' �title"> l=追加ont-s�ont-s�'                                   Att   sear( �→</span>
       {filter                    co                              <orm() {
   page-hea   olor:var(--text-secondary);">${with                               <divh2>出席Col簿</h2>                              <divp tn ${th ubtitle">        course]Month��ター�'-| []年')�   l  出席記録</p="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
        9" y2="12"/></svg>
 g>
       <div c(ab-nav"e  yle="margin-bottom:28px;olor:var(--text-secondary);">${w="statu  x1att   searOverviewTab"  <div c(ab-tle"       att   searTab     <overview( ? '休会 ��謝�">HOMEv "5" x2="12" y2="19"/><line x1="5" y1=="statu  x1att   searRec   Tab"  <div c(ab-tle"       att   searTab     <rec   ( ? '休会 ��謝�">出席記録</"5" x2="12" y2="19"/><line x1="5       9" y2="12"/></svg>
 g>
        att   searTab     <overview( ?            Att   searOverview()���           Att   searRec   (                              9" y2="12"/></sv`                                  Att   searOverview()�→</span>
       otalCl[year,|month]] |      course]Month�split('-( ;
               to   全t��日l  �-title">数l �tyle��=��l��集計               tolea[total  {
 ecass0
                llea[totalS      cass0
                lObjurs.keys(      cheduleD   ).forEach(day] ��':0,'4':0,'３':1,'3':total  {
 eca+=       cheduleD   [day]t      
th > 0 ?
        '3':t     cheduleD   [day]tuorEach(cls休�→</span>
                otalS      ca+=lcls        cl      
th > 0 ?
        '3':}ect.values(att)))))}�
                 t]) =>daySda cassObjurs.keys(      cheduleD   ).�</tday] ��':0,'4':0,'３':1,'3':t]) =>c {
 ecasst     cheduleD   [day]                to    otalCl       Cou   =>c {
 eclreduar((sum,>cls�細 sum + cls        cl      , 0)udents = 0;
          {filter{|day, c {
 Cou  : c {
 ecl      ,        Cou   ngth > 0 ?
        � ;
               to   詳細売�i計算                 t]) =>detailedCount = talcu    DetailedRevenue  
                 t]) =>visi  rRevenueCount = talcu    Visi  rRevenue  
                 t]) =>pr休�ceRevenue   detailed['t��習会'].revenue                  t]) => otalExtraRevenue   Objurs.line s(detailed)lreduar((sum,>d�細 sum + d.revenue, 0)ud               to   表示順序o��定義                 t]) =>displayO    'ssest��習会',e'� || new Dattenat(4,1）',e'� || new Datten非at(4,1）',e'� || new Dat1.5htenat(4,1）',e'� || new Dat1.5hten非at(4,1）',e'       -title">振替',e'初回体験e,e'初回無料'];
               to   各it�>郀�ン受講人=�� & i;�ン��トitle"�ew Dat別デacehol) => {
          t]) =>lessonD      etudents = 0;
      t]) =>i) =rursorMap    ngth > 0 ?
        otalCldayO    'sseswidt��日| []火t��日| []水t��日| []木t��日| []金t��日|]gth > 0 ?
        otalCldayCtlo s   { swidt��日|��    | []火t��日|:  red( []水t��日|:[]  een| []木t��日|:[]orange| []金t��日|:[]purpl� �};
               tofor (t]) =>day]ofldayO    �'                      t]) =>c {
 ecasst     cheduleD   [day]]   etudents = 0;
      tFiefor (t]) =>cls�oflc {
 ec�'                              ) s        cl           0) t])tinue                          t]) =>partlass) s ntLi�split(' '                 to        t]) =>i) =rursor d|�artl[�artl.       - 1tudents = 0;
      tFieeeeelessonD   lpush({[day, loca    :s) s loca    ,(ntLi:l) s ntLi,>i) =rursor,|cou  : cls        cl      , otlo : cls colo                    totFie����    !i) =rursorMap[i) =rursor] => { this.updateEditFieeeeeeeeei) =rursorMap[i) =rursor]   {|c {
 ec: 0,r       c: 0, c {
 List: [] ngth > 0 ?
                                          i) =rursorMap[i) =rursor].c {
 ec++
                llllllllli) =rursorMap[i) =rursor].s      ca+=lcls        cl      
th > 0 ?
        '3':    i) =rursorMap[i) =rursor].c {
 List.push(`  day.charAt(0r} ="  s loca    } ="  s ntLi��ター�' ' + i) =rursor,|    ` ) {
                  }
           let t}
           let totalCl orse]In =rursorcassObjurs.   ries(i) =rursorMap)ler();">� ��細 b[1].s      ca- a[1].s      c 
                 t]) =>lessonTotalasslessonD   lreduar((s, l�細 s + l.cou  , 0)ud               to{filter                    co                              <orm(  yle="display:flex;justify-t])t   :spー-between;align-items:ce">  ;margin-bottom:32px;olor:var(--text-secondary);">${w    v class="vh-value">¥${visitorReven<orm(  yle="display:flex;gap:10px;align-items:ce">  ;ig0px;">
                          =="statu  x1prevMonth"  <div ctle"tle-sec   sry"tle-sm">◀ 前widv "5" x2="12" y2="19"/><line x1="5" y1    =in-bo type="month"   x1monthScoursorOverview" line x1="      course]Month}"  <div cform-in-bo"e  yle="padr" d:8px 14px; ttersize:14px; tterweight:500;"/g0px;">
                          =="statu  x1  x Month"  <div ctle"tle-sec   sry"tle-sm">次wid ▶v "5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
         9" y2="12"/></svg>
 g>
       <div csda -gridolor:var(--text-secondary);">${w     <div csda -cardolor:var(--text-secondary);">${">${w     <div csda -ic                                              wsvg viewBox="0 0 24 24" fillx1 one"e  roke="  rre  Ctlo "e  roke-width="2"><rurs x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg                               <div class="vh-value">¥${visitorReven">${w     <div csda -label">総�-title">数v class="vh-value">¥${visitorReven">${w     <div csda -line "e  yle=" ttersize:36px;ol=" otal  {
 ec}condary)';
  sda -unit">�-title"></}</spv class="vh-value">¥${visitorReven< class="vh-value">¥${visitorReven<orm( <div csda -cardolor:var(--text-secondary);">${">${w     <div csda -ic     een                                       wsvg viewBox="0 0 24 24" fillx1 one"e  roke="  rre  Ctlo "e  roke-width="2"><pa    x1M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4-4v2"/><circle cx="9"  y="7" r="4"/></svg                               <div class="vh-value">¥${visitorReven">${w     <div csda -label">総tyle��=��tent��="�）v class="vh-value">¥${visitorReven">${w     <div csda -line "e  yle=" ttersize:36px;otlo :var(--acce">);ol=" otalS      c}condary)';
  sda -unit">名</}</spv class="vh-value">¥${visitorReven< class="vh-value">¥${visitorReven<orm( <div csda -cardolor:var(--text-secondary);">${">${w     <div csda -ic   purpl�                                       wsvg viewBox="0 0 24 24" fillx1 one"e  roke="  rre  Ctlo "e  roke-width="2"><pa    x1M12 2v20M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6"/></svg                               <div class="vh-value">¥${visitorReven">${w     <div csda -label">� || new Dat売�iv class="vh-value">¥${visitorReven">${w     <div csda -line "e  yle=" ttersize:36px;otlo :var(--  een);ol¥${visi  rRevenue.toLocalemargin )}v class="vh-value">¥${visitorReven< class="vh-value">¥${visitorReven<orm( <div csda -cardolor:var(--text-secondary);">${">${w     <div csda -ic   orange                                       wsvg viewBox="0 0 24 24" fillx1 one"e  roke="  rre  Ctlo "e  roke-width="2"><circle cx="12"  y="12" r="10"/><polyline poi  c="12 6 12 12 16 14"/></svg                               <div class="vh-value">¥${visitorReven">${w     <div csda -label">練習会売�iv class="vh-value">¥${visitorReven">${w     <div csda -line "e  yle=" ttersize:36px;otlo :var(--i姓"sec   sry);ol¥${pr休�ceRevenue.toLocalemargin )}v class="vh-value">¥${visitorReven">${w      yle=" ttersize:12px;otlo :var(--i姓">  tisry);margin-top:8px;ol="detailed['t��習会'].cou  }Col参加v class="vh-value">¥${visitorReven< class="vh-value">¥${visitorR        9" y2="12"/></svg>
 g>
       <div ct])t   -cardoe  yle="margin-bottom:24px;padr" d:0;overflow:hid   ;olor:var(--text-secondary);">${w   e  yle="padr" d:24px 28px 0;ig0px;">
                          =h3  <div ctard-title">売�i内訳tent��講人=��・売�i）v h3ss="vh-value">¥${visitorReven< class="vh-value">¥${visitorReven<orm(  yle="overflow-x:auto;padr" d:16px 0 0;ig0px;">
                          =table                                      wthea                                           wtr                                              wthe  yle="padr" d-left:28px;ol ��%��ゴリ</th                                              wthe  yle="i姓"align:ce">  ;ig単価</th                                              wthe  yle="i姓"align:ce">  ;ig受講人=��</th                                              wthe  yle="i姓"align:right;padr" d-right:28px;ol売�iv th                                          v tr                                      v thea                                       <tbody                                          ="displayO    .�</tp (d  ��':0,'4':0,'３':1,'3':1,'�LocaaaaaaaaaaaaaaaaaotalCld   assdetailed[p (d]'|| {|cou  : 0,rrevenue:e0 }
th > 0 ?
        '3':    LocaaaaaaaaaaaaaaaaaotalCl�riur] |     �riualF[p (d]'|| 0
                lllllllllllll����������������{filter                    cooooooooooooooooooooooooooooowtr                                              oooooooowtde  yle="padr" d-left:28px; tterweight:500;"l="p (d}v t                                               oooooooowtde  yle="i姓"align:ce">  ;otlo :var(--i姓"sec   sry);ol¥${pr�ce.toLocalemargin )}v t                                               oooooooowtde  yle="i姓"align:ce">  ;                                                             data.cou  /> 0 ? `condary)';
  badge badge-        data.cou  }="p (d     <t��習会' ? 'Col ���回'}</}</sp`���condar  yle="otlo :var(--i姓">  tisry);">-</}</sp'合計</span>
                                oooooooow t                                               oooooooowtde  yle="i姓"align:right;padr" d-right:28px; tterweight:600;otlo :  data.revenue]> 0 ? 'var(--  een) ���var(--i姓">  tisry)'};                                                             data.revenue]> 0 ? '¥' + data.revenue.toLocalemargin )���-'合計</span>
                                oooooooow t                                               oooov tr                                              etail">¥${price.toLoca  tooooooooooooooooo} </tr>(''                                   oooov tbody                                      <tfoot                                          wtre  yle="b    r-top:2px solid var(--i姓"pr�msry);">                                             wtde  yle="padr" d-left:28px; tterweight:700;" otl}</s="3">合計w t                                               wtde  yle="i姓"align:right;padr" d-right:28px; tterweight:700; ttersize:18px;otlo :var(--acce">);ol¥${ otalExtraRevenue.toLocalemargin )}v t                                           v tr                                      v tfoot                                  v table                              < class="vh-value">¥${visitorR        9" y2="12"/></svg>
 g>
       <div ct])t   -cardoe  yle="margin-bottom:24px;padr" d:0;overflow:hid   ;olor:var(--text-secondary);">${w   e  yle="padr" d:24px 28px 0;ig0px;">
                          =h3  <div ctard-title">各it�>郀�ン受講人=��v h3ss="vh-value">¥${visitorReven< class="vh-value">¥${visitorReven<orm(  yle="overflow-x:auto;padr" d:16px 0 0;ig0px;">
                          =table                                      wthea                                           wtr                                              wthe  yle="padr" d-left:28px;olt��日</th                                              wth>場所</th                                              wth> �title">Col</th                                              wthe  yle="i姓"align:ce">  ;ig講師</th                                              wthe  yle="i姓"align:ce">  ;padr" d-right:28px;ol受講人=��</th                                          v tr                                      v thea                                       <tbody                                          ="lessonD   l�</tl休�`                                             wtr                                              oooowtde  yle="padr" d-left:28px;">condary)';
  badge badge-        l.day}</}</spv t                                               oooovtde  yle="otlo :var(--i姓"sec   sry);ol  l.loca    }v t                                               oooovtde  yle=" tterweight:500;"l="l ntLi}v t                                               oooovtde  yle="i姓"align:ce">  ;igcondary)';
  badgeoe  yle="backg�  </:rgba(175,82,222,0.1);otlo :var(--purpl�);ol  l.i) =rursor}</}</spv t                                               oooovtde  yle="i姓"align:ce">  ;padr" d-right:28px;olcondary)';
  badge badge-  een    l.cou  }Col</}</spv t                                               v tr                                          ` </tr>(''                                   oooov tbody                                      <tfoot                                          wtre  yle="b    r-top:2px solid var(--i姓"pr�msry);">                                             wtde  yle="padr" d-left:28px; tterweight:700;" otl}</s="4">合計w t                                               wtde  yle="i姓"align:ce">  ;padr" d-right:28px; tterweight:700;otlo :var(--acce">);ol="lessonTotal}Col</t                                           v tr                                      v tfoot                                  v table                              < class="vh-value">¥${visitorR        9" y2="12"/></svg>
 g>
       <div ct])t   -cardoe  yle="margin-bottom:24px;olor:var(--text-secondary);">${w     <div ctard-hea   olor:var(--text-secondary);">${">${wh3  <div ctard-title">i;�ン��トitle"�ew Dat別 tyle��=��v h3ss="vh-value">¥${visitorReven< class="vh-value">¥${visitorReven<orm(  yle="display:grid;grid-i�mp    -otlumns:repeat(3,1fr);gap:16px;olor:var(--text-secondary);">${{{{{${ orse]In =rursorcl�</t([ntLi,>data])休�`                                     w     <div ctard"e  yle="padr" d:20px;olor:var(--text-secondary);">${{{{{torReven<orm(  yle="display:flex;justify-t])t   :spー-between;align-items:ce">  ;margin-bottom:10px;olor:var(--text-secondary);">${{{{{torReveneven<ondar  yle=" ttersize:16px; tterweight:700;otlo :var(--purpl�);let>  -sp�" d:-0.3px;ol="ntLi}v }</spor:var(--text-secondary);">${{{{{torReveneven<ondary)';
  badgeoe  yle="backg�  </:var(--purpl�);otlo :white;    data.s      c}Col</}</sp                                         v class="vh-value">¥${visitorReven">${        v      yle=" ttersize:12px;otlo :var(--i姓"sec   sry);margin-bottom:10px;ol  data.c {
 ec}�-title">担当v class="vh-value">¥${visitorReven">${        v      yle="display:flex;flex-wrap:wrap;gap:4px;olor:var(--text-secondary);">${{{{{{{{{{{{{{{{{  data.c {
 List.�</t'休�`<ondar  yle="backg�  </:rgba(0,0,0,0.04);otlo :var(--i姓"sec   sry);padr" d:3px 8px;b    r-radius:6px; ttersize:11px;ol  c}</}</sp` </tr>(''                                   oooo    v class="vh-value">¥${visitorReven">${    v class="vh-value">¥${visitorReven">${` </tr>(''                               < class="vh-value">¥${visitorR        9" y2="12"/></svg>
 g>
       <div ct])t   -gridolor:var(--text-secondary);">${w     <div ct])t   -cardoss="vh-value">¥${visitorReven">${w     <div ctard-hea   olor:var(--text-secondary);">${">${">${wh3  <div ctard-title">t��日別�-title">数v h3ss="vh-value">¥${visitorReven">${w class="vh-value">¥${visitorReven">${  daySda c.�</tsda 休�`                                     w     <div crevenue-rowolor:var(--text-secondary);">${{{{{torReven<ondary)';
  rev-label">${ da .day}</}</sps="vh-value">¥${visitorReven">${        v      yle="display:flex;gap:16px;align-items:ce">  ;ig0px;">
                          {{{{torReven<ondar  yle=" ttersize:13px;otlo :var(--i姓"sec   sry);ol${ da .c {
 Cou  }�-title"></}</spor:var(--text-secondary);">${{{{{torReveneven<ondary)';
  badge badge-         da .       Cou  }Col</}</sp                                         v class="vh-value">¥${visitorReven">${    v class="vh-value">¥${visitorReven">${` </tr>(''                               < class="vh-value">¥${visitorR    <     <div ct])t   -cardoss="vh-value">¥${visitorReven">${w     <div ctard-hea   olor:var(--text-secondary);">${">${">${wh3  <div ctard-title">バ�h� -tアth� t�v h3ss="vh-value">¥${visitorReven">${w class="vh-value">¥${visitorReven">${<pr  yle=" ttersize:14px;otlo :var(--i姓"sec   sry);margin-bottom:20px;olデacehold��安全�  ため、定期的に%���h� -tアth� t� l=取得�t-size:12px;font。</p="12" y2="19"/><line x1="5" y1">${<="statu  x1backupBtn"  <div ctle"tle-  een r  yle="width:100%;justify-t])t   :ce">  ;ig0px;">
                          {{{{wsvg width="16" height="16" viewBox="0 0 24 24" fillx1 one"e  roke="  rre  Ctlo "e  roke-width="2"><pa    x1M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline poi  c="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg                               <diiiii%���h� -tアth� t� l=取得s="vh-value">¥${visitorReven">${w "5" x2="12" y2="19"/><line x1="5" y1    =      x1backupSda us"e  yle=" ttersize:12px;otlo :var(--i姓">  tisry);i姓"align:ce">  ;margin-top:12px;olv class="vh-value">¥${visitorReven< class="vh-value">¥${visitorR       -value">¥${visitorR       -value">¥${visi`                                  Att   searRec   ( �':0,'4':0,'３':1,   i;�ベbo� t  � Da�d��専用l  it�>� t�リe��炰:0,'4':0,'３':1,    nt =  course]Day]    <�;�ベbo� t ' => { this.updateEditFie  �数�            vch(Rec   ( 
                l}               tootalCl[year,|month]] |      course]Month�split('-( ;
              tootalCldayC {
 ecasst     cheduleD   [nt =  course]Day]]   etudents = 0;
          nt = isLoer" d => { this.updateEditFie  �数�`                         w     <div cflex items-ce">   justify-te">   h-96olor:var(--text-secondary);">${w     <div ci姓"te">  oss="vh-value">¥${visitorReven">${w     <div cinline-  ock anim   -spin �  </ed-full h-12 w-12 b    r-b-2 b    r-b   -600 mb-4"lv class="vh-value">¥${visitorReven">${wp  <div ci姓"gray-600">yle="w込み中...</p="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
        9" y2="12"/></svg>
 etail">¥${price.to}               to{filter                    co                              <orm() {
   flex justify-between items-ce">   mb-6olor:var(--text-secondary);">${wh2  <div ci姓"2xl  tterbold i姓"gray-800">出席記録</h2>                             <orm() {
   flex gap-2 items-ce">  ig0px;">
                          =="statu  x1prevMonthRec   "  <div ctg"gray-200 hover:tg"gray-300 px-3 py-2 �  </ed transi    /i姓"sm"        isLoer" ds? 'disabled ��謝�>◀ 前widv "5" x2="12" y2="19"/><line x1="5" y1    =in-bo                               <diiiiitype="month"                               <diiiii  x1monthScoursor"                               <diiiiiline x1="      course]Month}"                               <diiiii) {
   px-3 py-2 b    r b    r-b   -300 tg"b   -50/i姓"b   -800 �  </ed  ttermedium/i姓"sm  tcus:outline- one  tcus:rgin-2  tcus:rgin-b   -500"                              <di/g0px;">
                          =="statu  x1  x MonthRec   "  <div ctg"gray-200 hover:tg"gray-300 px-3 py-2 �  </ed transi    /i姓"sm"        isLoer" ds? 'disabled ��謝�>次wid ▶v "5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
        2="19" y2="12"/></svg>
  orm() {
   tg"white �  </ed-lg shadow mb-4"l                             <orm() {
   flex b    r-b overflow-x-autoolor:var(--text-secondary);">${{{{{${eswidt��日| []火t��日| []水t��日| []木t��日| []金t��日|, '�;�ベbo� t ']l�</tday] ��`                                     w="statu  x1day-  day}"i) {
   px-4 py-2 i姓"sm  ttermedium/whitespー-nowrap ="      course]Day]    day]? 'i姓"b   -600 b    r-b-2 b    r-b   -600 tg"b   -50 ���i姓"gray-600 hover:i姓"b   -600 hover:tg"gray-50 }ig0px;">
                          {{{{torR  day}s="vh-value">¥${visitorReven">${    v "5" x2="12" y2="19"/><line x1="5" y1    ` </tr>(''                               < class="vh-value">¥${visitorR       ="vh-value">¥${visitorR="      text" S      For"s?            A" S      For" )���'合計</span>
              dayC {
 ecl�</t() {
 Info,u  x)  ��':0,'4':0,'３':1,'3':1,'�LocaotalCl orse]S      cass      orsS      cByPlan([...) {
 Info.s      c]�) {
                                    t� tle��l  �yle��d��常に表示、それ以外d��当   l  出席デacehold��ある場合�  み表示:0,'4':0,'３':1,'3':1,'�LocaotalClfs ===e]S      cass orse]S      c.fs ===         =��':0,'4':0,'３':1,'3':1,'�Locaaaaa    nt = isRegularPlan(       .p (d ��徒数| re                 to':1,'3':1,'�LocaotalClkey] |`        course]Day}_${) {
 Info.loca    }_${) {
 Info.ntLi}_   d     .        }  sd     .</EventLi�e                to':1,'3':1,'�Loca  �数�     att   searD   .hasOwnProp  ty key�) {
                                            totFie����Loca  �数�`                                  orm() {
   tg"white �  </ed-lg shadow mb-3ig0px;">
                          {{{{worm() {
   tg"${) {
 Info.otlo }-600 i姓"white px-4 py-2 �  </ed-t-lg flex justify-between items-ce">  olor:var(--text-secondary);">${{{{{torReven<h3  <div ci姓"base  tterboldol  c {
 Info.loca    } - ${) {
 Info.ntLi}v h3ss="vh-value">¥${visitorReven">${    {{{{worm() {
   flex gap-2 items-ce">  ig0px;">
                          ">${    {{{{wondary)';
  i姓"xs op�"ty-90ol  fs ===e]S      cl      }Col</}</sp                                         {{{{w="statu                                             oooodata-add-dayx1="      course]Day}"i                                             oooodata-add-loca    x1="c {
 Info.loca    }"i                                             oooodata-add-y)';
  ${) {
 Info.ntLi}"                              <diiiiiiiiiiiiiiiiiy)';
  add-sd     -tle"tg"white tg"op�"ty-20 hover:tg"op�"ty-30 px-2 py-1 �  </ed t姓"xs transi                                                       + tyle��追加                                             v "5" x2="12" y2="19"/><line x1="5" y1            v class="vh-value">¥${visitorReven">${    v class="vh-value">¥${visitorReven">${    vorm() {
   p-3 overflow-x-autoolor:var(--text-secondary);">${{{{{">${    vtable() {
   w-full t姓"xs">                                             wthea                                                   wtr  <div ctg"gray-50 b    r-b                                                       wthe) {
   px-2 py-2 i姓"left  ttersemiboldor  yle="width: 100px;olt��Col</th                                                      wthe) {
   px-2 py-2 i姓"left  ttersemiboldor  yle="width: 100px;ol t� tle��</th                                                      wthe) {
   px-2 py-2 i姓"ce">    ttersemiboldor  yle="width: 50px;ol第1週</th                                                      wthe) {
   px-2 py-2 i姓"ce">    ttersemiboldor  yle="width: 50px;ol第2週</th                                                      wthe) {
   px-2 py-2 i姓"ce">    ttersemiboldor  yle="width: 50px;ol第3週</th                                                      wthe) {
   px-2 py-2 i姓"ce">    ttersemiboldor  yle="width: 50px;ol第4週</th                                                      wthe) {
   px-2 py-2 i姓"ce">    ttersemiboldor  yle="width: 50px;ol予備</th                                                      wthe) {
   px-2 py-2 i姓"ce">    ttersemiboldor  yle="width: 60px;ol出席率</th                                                      wthe) {
   px-2 py-2 i姓"ce">    ttersemiboldor  yle="width: 50px;ol編集</th                                                  v tr                                              v thea                                               vtbody                                                    fs ===e]S      cl�</tsd      =��':0,'4':0,'３':1,'3':1,'�LocaaaaaaaaaaaaaaaaaaaaaaaaaotalCl       Key] |`        course]Day}_${) {
 Info.loca    }_${) {
 Info.ntLi}_   d     .        }  sd     .</EventLi�e                to':1,'3':1,'�LocaaaaaaaaaaaaaaaaaaaaaotalClatt   searass     att   searD   [       Key]    {ngth > 0 ?
        ':1,'3':1,'�LocaaaaaaaaaaaaaaaaaaaaaotalClratrass     "18Att   searR   (       Key                 totFie����LocaLocaaaaaaaaaaaaaaaaaaaaaotalClisEdi   ds=  er(cedi   dS       &&i                                             ooooooooooooooooooooooooo er(cedi   dS      .day]          course]Day]&&                                             ooooooooooooooooooooooooo er(cedi   dS      .loca    /d==>c {
 Info.loca    ]&&                                             ooooooooooooooooooooooooo er(cedi   dS      .c {
 ntLi d==>c {
 Info.ntLi]&&                                             ooooooooooooooooooooooooo er(cedi   dS      .l       ud==> d     .        ]&&                                             ooooooooooooooooooooooooo er(cedi   dS      .ddEventLisd==> d     .ddEventLi                totFie����LocaLocaaaaaaaaaaaaaaaaaaaaa               totFie����LocaLocaaaaaaaaaaaaaaaaaaaaa    isEdi   d => { this.updateEditFieeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee{filter                    cooooooooooooooooooooooooooooooooooooooooowtr  <div ct    r-b tg"b   -50                                                           oooooooowtde) {
   px-2 py-2 i姓"xs">   d     .        }   sd     .</EventLi�w t                                               oooooooo    oooooooowtde) {
   px-2 py-2 i姓"xs">                                             oooooooooooooooooooooooo< coursu  x1edi _sd     _p (d"() {
   w-full b    r �  </ed px-1 py-1 i姓"xs">                                             oooooooooooooooooooooooooooo<op    ]line x1４�-title">"   sd     .p (d     <４�-title">' ? ' course] ��謝�>４�-title"></op    >                                             oooooooooooooooooooooooooooo<op    ]line x1３�-title">"   sd     .p (d     <３�-title">' ? ' course] ��謝�>３�-title"></op    >                                             oooooooooooooooooooooooooooo<op    ]line x1２�-title">"   sd     .p (d     <２�-title">' ? ' course] ��謝�>２�-title"></op    >                                             oooooooooooooooooooooooooooo<op    ]line x1１�-title">"   sd     .p (d     <１�-title">' ? ' course] ��謝�>１�-title"></op    >                                             oooooooooooooooooooooooooooo<op    ]line x1� || new Dattenat(4,1）"   sd     .p (d     <� || new Dattenat(4,1）' ? ' course] ��謝�>� || new Dattenat(4,1）</op    >                                             oooooooooooooooooooooooooooo<op    ]line x1� || new Datten非at(4,1）"   sd     .p (d     <� || new Datten非at(4,1）' ? ' course] ��謝�>� || new Datten非at(4,1）</op    >                                             oooooooooooooooooooooooooooo<op    ]line x1� || new Datten振替）"   sd     .p (d     <� || new Datten振替）' ? ' course] ��謝�>� || new Datten振替）</op    >                                             oooooooooooooooooooooooooooo<op    ]line x1初回体験"   sd     .p (d     <初回体験e ? ' course] ��謝�>初回体験</op    >                                             oooooooooooooooooooooooooooo<op    ]line x1初回無料"   sd     .p (d     <初回無料' ? ' course] ��謝�>初回無料</op    >                                             oooooooooooooooooooooooo</ cours                                              oooooooo    oooooooow t                                               oooooooo    oooooooo${esweek1| []week2| []week3| []week4| []week5']l�</tweek休�`                                                 oooooooo    oooooooowtde) {
   px-2 py-2 i姓"ce">  ig0px;">
                          ">${    {{{{        oooooooo    oooooooow="statu                                             oooooooooooooooooooooooooooooooodata-y)';
  ${       Key}"i                                             oooooooooooooooooooooooooooooooodata-week  ${week}"                              <diiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiy)';
  att   sear-tle"w-8 h-8 �  </ed b    r t姓"xs $> { this.updateEditFieeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeatt   sear[week]     <○'�? 'tg"green-500 b    r-green-600 i姓"white �� { this.updateEditFieeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeatt   sear[week]     <×( ? 'tg"red-500 b    r-red-600 i姓"white �� { this.updateEditFieeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeatt   sear[week]     <at�講'�? 'tg"gray-500 b    r-gray-600 i姓"white �� { this.updateEditFieeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee'tg"gray-100 b    r-gray-300 i姓"gray-400' { this.updateEditFieeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee} hover:op�"ty-80 transi    / tterboldol { this.updateEditFieeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee${att   sear[week]     <at�講'�? 'at� ���att   sear[week]     -'合計</span>
                                oooooooooooooooooooooooooooov "5" x2="12" y2="19"/><line x1="5" y1            oooooooooooooooooooooooooooov t                                               oooooooo    oooooooo` </tr>(''                                   oooo    oooooooooooooooooooooooovtde) {
   px-2 py-2 i姓"ce">  ig0px;">
                          ">${    {{{{        oooooooo    oooowondary)';
  px-2 py-1 �  </ed-full t姓"xs  ttersemibold $> { this.updateEditFieeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeratra>= 80�? 'tg"green-100 i姓"green-800 �� { this.updateEditFieeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeratra>= 50�? 'tg"yellow-100 i姓"yellow-800 �� { this.updateEditFieeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeratra> 0 ? 'tg"red-100 i姓"red-800 �� { this.updateEditFieeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee'tg"gray-100 i姓"gray-600' { this.updateEditFieeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee}">  ratra> 0 ? ratra+ '%'���-'�</}</sp                                         {{{{{{{{{{{{{{{{{{{{{{{{w t                                               oooooooo    oooooooowtde) {
   px-2 py-2 i姓"ce">  ig0px;">
                          ">${    {{{{        oooooooo    ooooworm() {
   flex flex-col gap-1ig0px;">
                          ">${    {{{{        oooooooo    oooooooow="statu                                             oooooooooooooooooooooooooooooooo  x1    Edi S      Btn"                              <diiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiy)';
  i姓"green-600 hover:i姓"green-800 i姓"xs">                                             oooooooooooooooooooooooooooooooo保存                                                                         v "5" x2="12" y2="19"/><line x1="5" y1            oooooooooooooooooooooooooooo    v="statu                                             oooooooooooooooooooooooooooooooo  x1csearlEdi S      Btn"                              <diiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiy)';
  i姓"gray-600 hover:i姓"gray-800 i姓"xs">                                             ooooooooooooooooooooooooooooooooキャe��炻ル                                                                         v "5" x2="12" y2="19"/><line x1="5" y1            oooooooooooooooooooooooooooo    v="statu                                             oooooooooooooooooooooooooooooooodata-dcoute-dayx1="      course]Day}"                                             oooooooooooooooooooooooooooooooodata-dcoute-loca    x1="c {
 Info.loca    }"                                             oooooooooooooooooooooooooooooooodata-dcoute-y)';
  ${) {
 Info.ntLi}"                              <diiiiiiiiiiiiiiiiioooooooooooooooooooooooooooodata-dcoute-    ntLi  ${       .        }"                              <diiiiiiiiiiiiiiiiioooooooooooooooooooooooooooodata-dcoute-</EventLi  ${       .</EventLi�"                              <diiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiy)';
  dcoute-sd     -tle"i姓"red-600 hover:i姓"red-800 i姓"xs">                                             oooooooooooooooooooooooooooooooo削除                                                                         v "5" x2="12" y2="19"/><line x1="5" y1            oooooooooooooooooooooooooooov class="vh-value">¥${visitorReven">${        oooooooooooooooooooooooov t                                               oooooooo    oooov tr                                                          e                to':1,'3':1,'�Locaaaaaaaaaaaaaaaaaaaaa                                  oooo    oooooooooooo                                 oooo    oooooooooooo{filter                    cooooooooooooooooooooooooooooooooooooowtr  <div ct    r-b hover:tg"gray-50">                                             oooooooooooooooowtde) {
   px-2 py-2 i姓"xs">   d     .        }   sd     .</EventLi�w t                                               oooooooo    oooowtde) {
   px-2 py-2 i姓"xs">   d     .p (d}v t                                               oooooooooooooooo${esweek1| []week2| []week3| []week4| []week5']l�</tweek休�`                                                 oooooooo    oooowtde) {
   px-2 py-2 i姓"ce">  ig0px;">
                          ">${    {{{{        oooooooo    oooow="statu                                             oooooooooooooooooooooooooooodata-y)';
  ${       Key}"i                                             oooooooooooooooooooooooooooodata-week  ${week}"                              <diiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiy)';
  att   sear-tle"w-8 h-8 �  </ed b    r t姓"xs $> { this.updateEditFieeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeatt   sear[week]     <○'�? 'tg"green-500 b    r-green-600 i姓"white �� { this.updateEditFieeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeatt   sear[week]     <×( ? 'tg"red-500 b    r-red-600 i姓"white �� { this.updateEditFieeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeatt   sear[week]     <at�講'�? 'tg"gray-500 b    r-gray-600 i姓"white �� { this.updateEditFieeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee'tg"gray-100 b    r-gray-300 i姓"gray-400' { this.updateEditFieeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee} hover:op�"ty-80 transi    / tterboldol { this.updateEditFieeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee${att   sear[week]     <at�講'�? 'at� ���att   sear[week]     -'合計</span>
                                oooooooooooooooooooooooov "5" x2="12" y2="19"/><line x1="5" y1            oooooooooooooooooooooooov t                                               oooooooooooooooo` </tr>(''                                   oooo    oooooooooooooooooooowtde) {
   px-2 py-2 i姓"ce">  ig0px;">
                          ">${    {{{{        oooooooo    wondary)';
  px-2 py-1 �  </ed-full t姓"xs  ttersemibold $> { this.updateEditFieeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeratra>= 80�? 'tg"green-100 i姓"green-800 �� { this.updateEditFieeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeratra>= 50�? 'tg"yellow-100 i姓"yellow-800 �� { this.updateEditFieeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeratra> 0 ? 'tg"red-100 i姓"red-800 �� { this.updateEditFieeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee'tg"gray-100 i姓"gray-600' { this.updateEditFieeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee}">  ratra> 0 ? ratra+ '%'���-'�</}</sp                                         {{{{{{{{{{{{{{{{{{{{w t                                               oooooooo    oooowtde) {
   px-2 py-2 i姓"ce">  ig0px;">
                          ">${    {{{{        oooooooo    w="statu                                             oooooooooooooooooooooooodata-edi -sd     -dayx1="      course]Day}"                                             oooooooooooooooooooooooodata-edi -sd     -loca    x1="c {
 Info.loca    }"                                             oooooooooooooooooooooooodata-edi -sd     -y)';
  ${) {
 Info.ntLi}"                              <diiiiiiiiiiiiiiiiioooooooooooooooooooodata-edi -sd     -l   ntLi  ${       .        }"                              <diiiiiiiiiiiiiiiiioooooooooooooooooooodata-edi -sd     -</EventLi  ${       .</EventLi�"                              <diiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiy)';
  edi -sd     -tle"i姓"b   -600 hover:i姓"b   -800 i姓"xs">                                             oooooooooooooooooooooooo編集"12" y2="19"/><line x1="5" y1            oooooooooooooooooooooooov "5" x2="12" y2="19"/><line x1="5" y1            oooooooooooooooooooow t                                               oooooooo    v tr                                                      e                to':1,'3':1,'�Locaaaaaaaaaaaaaaaaa} </tr>(''                                   oooooooooooov tbody                                      oooov table                                      w class="vh-value">¥${visitorReven">${w class="vh-value">¥${visitorRevene                to':1,'3':} </tr>(''                                                      dayC {
 ecl           0 ? `s="vh-value">¥${visitorReven orm() {
   tg"white �  </ed-lg shadow p-12 i姓"te">  oss="vh-value">¥${visitorReven">${wp  <div ci姓"gray-500 i姓"lg">このt��日に%���-title">d��ありません</p="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
 `���'�                            nt =  course]Day]    <widt��日|    nt =  course]Day]    <wi�t��日|)s?            Pr休�ceSess    )���'合計</span>
               -value">¥${visi`                            // t��習会炻�-tショe��l  it�>� t�リe��炰:0,'4':0,'３      Pr休�ceSess    )�> { this.updateEdiotalCl�r休�ceKey] |`t��習会_="      course]Day}e                tootalCl�r休�ceD   ass     att   searD   [�r休�ceKey]    {ngth > 0 ?
        otalClweekcassesweek1| []week2| []week3| []week4| []week5']gth > 0 ?
        otalClweekLabelcasses第1週| []第2週| []第3週| []第4週| []予備']gth > 0 ?
        let  otalPar��ci</s cass0
                lweekc.forEach(w =��'  otalPar��ci</s ca+= (parseInt(�r休�ceD   [w])'|| 0);                   tootalCl otalRevenueass otalPar��ci</s ca* 500;�                 {filter                    co    () {
   tg"white �  </ed-lg shadow mb-3ig0px;">
                      () {
   tg"purpl�-600 i姓"white px-4 py-2 �  </ed-t-lg flex justify-between items-ce">  olor:var(--text-secondary);">${<h3  <div ci姓"base  tterboldolt��習会（¥500/人）v h3ss="vh-value">¥${visitorReven<ondary)';
  i姓"xs op�"ty-90ol合計: ${ otalPar��ci</s c}Col / ¥${ otalRevenue.toLocalemargin )}v }</sp                                2="19" y2="12"/></svg>
  orm() {
   p-3ig0px;">
                      vtable() {
   w-full t姓"xs">                                 wthea                                       wtr  <div ctg"gray-50 b    r-b                                           wthe) {
   px-2 py-2 i姓"left  ttersemiboldor  yle="width: 100px;ol項目</th                                          ${weekLabelcl�</tlabel休�`                                             wthe) {
   px-2 py-2 i姓"ce">    ttersemiboldor  yle="width: 70px;ol  label}</th                                          ` </tr>(''                                   oooo    vthe) {
   px-2 py-2 i姓"ce">    ttersemiboldor  yle="width: 70px;ol合計w th                                          vthe) {
   px-2 py-2 i姓"right  ttersemiboldor  yle="width: 90px;ol売�iv th                                      v tr                                  v thea                                   vtbody                                      wtr  <div ct    r-b                                           wtde) {
   px-2 py-2  ttermediumol参加人=��</t                                           ${weeksl�</tweek休�`                                             wtde) {
   px-2 py-2 i姓"ce">  ig0px;">
                          ">${    {{{{    =in-bo                                                     type="numb  i                                                     min="0"                              <diiiiiiiiiiiiiiiiiiiiiline x1="parseInt(�r休�ceD   [week])'|| 0�"                              <diiiiiiiiiiiiiiiiiiiiidata-�r休�ce-dayx1="      course]Day}"                                             oooooooodata-�r休�ce-week  ${week}"                              <diiiiiiiiiiiiiiiiiiiii) {
   pr休�ce-in-bo w-14 b    r �  </ed px-1 py-1 i姓"xs i姓"ce">    tcus:outline- one  tcus:rgin-2  tcus:rgin-purpl�-500"                              <diiiiiiiiiiiiiiiii/g0px;">
                                      </t                                           ` </tr>(''                                   oooo    vtde) {
   px-2 py-2 i姓"ce">  ig0px;">
                          ">${    {{{{<ondary)';
  bn-purpl�-100 i姓"purpl�-800 px-2 py-1 �  </ed-full t姓"xs  ttersemiboldol   otalPar��ci</s c}Col</}</sp                                         v t                                           vtde) {
   px-2 py-2 i姓"right  tterbold i姓"purpl�-700">¥${ otalRevenue.toLocalemargin )}v t                                       v tr                                  v tbody                              v table                                 -value">¥${visitorR       -value">¥${visi`                                  A" S      For" )�> { this.updateEdi{filter                    co    () {
   tg"b   -50/p-4 �  </ed-lg mb-4 b    r b    r-b   -200">                         <h3  <div ci姓"base  ttersemibold mb-3 i姓"gray-800">tyle��追加v h3ss="vh-value">¥${visitorR                         <!-- 顧客検索 --  2="19" y2="12"/></svg>
  orm() {
   mb-3ig0px;">
                      <label�) {
   t ock t姓"xs  ttermedium/mb-1ol顧客検索ten氏Col・yle="w・at(4,1番号）v labelg0px;">
                      <in-bo                               <ditype="t姓"i                                   x1 d     _search_in-bo"i                                 line x1="      d     SearchTerm}"                              <di) {
   w-full b    r �  </ed px-2 py-1 i姓"sm  tcus:outline- one  tcus:rgin-2  tcus:rgin-b   -500"i                                 placeholder="例: 中島、なか�t-s�、ナカシマ、nakashima、0001"                              <diautocompoute="off"                             /g0px;">
                      w     <div ci姓"xs i姓"gray-500 mt-1ol💡 漢字・ひらd��な・カタカナ・y��語・at(4,1番号で検索できますv class="vh-value">¥${visitorReven<!-- 検索結果表示用l��>� t�ナ --  2="19" y2="12"/></svg>
     w      x1 earchResultsCtteaine ig0px;">
                          ="      d     SearchResultsl       > 0 ? `s="vh-value">¥${visitorReven        w     <div cmt-2 b    r �  </ed tg"white sd     - earch-results shadow"lg">                                         ${      d     SearchResultsl�</t'ustom r ���`                                             w                                  <diiiiiiiiiiiiiiiiidata- cours-'ustom r-  x1${'ustom r.id}"                              <diiiiiiiiiiiiiiiiiy)';
   cours-'ustom r-tle"p-2 hover:tg"b   -50/cursor-poi   r b    r-b     :b    r-b-0 i姓"sm transi                                                       worm() {
   fttermedium/i姓"b   -600">                                             oooooooo${'ustom r.        }   'ustom r.</EventLi�                                             oooooooo${'ustom r.memb  Numb   ? `<ondary)';
  i姓"xs i姓"gray-500 ml-2">[${'ustom r.memb  Numb  }]</}</sp`���'合計</span>
                                    v class="vh-value">¥${visitorReven">${        oooooooow     <div ci姓"xs i姓"gray-600 mt-1ol                                             oooooooo${'ustom r.reer" ds? `yle="w:o${'ustom r.reer" d}`���'合計</span>
                                    oooo${'ustom r.reer" ds&& 'ustom r.course ? ' | '���'合計</span>
                                    oooo${'ustom r.course ? `l��>�ス:o${'ustom r.course}`���'合計</span>
                                    v class="vh-value">¥${visitorReven">${        oooov class="vh-value">¥${visitorReven">${        ` </tr>(''                                   oooov class="vh-value">¥${visitorReven">${`���      d     SearchTerm.arg" )�&&       d     SearchResultsl           0 ? `s="vh-value">¥${visitorReven    oooov     <div cmt-2 p-2 tg"yellow-50 b    r b    r-yellow-200 �  </ed i姓"xs i姓"yellow-800ol                                         ⚠️ 該当する顧客d��見つかりませんで�t-s�                                 oooov class="vh-value">¥${visitorReven">${`���'合計</span>
                < class="vh-value">¥${visitorR       ="vh-value">¥${visitorR="      course]Custom rForS       ? `s="vh-value">¥${visitorReven orm(  x1 eourse]Custom rInfo"() {
   mb-3 p-3 tg"green-50 b    r-2 b    r-green-400 �  </ed i姓"smoss="vh-value">¥${visitorReven">${w     <div cflex items-ce">   justify-betweenig0px;">
                          {{{{worm                                          vorm() {
   ftterbold i姓"green-800">✓ 選択中:R="      course]Custom rForS      .        }         course]Custom rForS      .</EventLi�w orm                                          vorm() {
   i姓"xs i姓"gray-700 mt-1ol                                                     course]Custom rForS      .memb  Numb   ? `at(4,1番号:R="      course]Custom rForS      .memb  Numb  } | `���'合計</span>
                                ="      course]Custom rForS      .reer" ds? `yle="w:o${      course]Custom rForS      .reer" d} | `���'合計</span>
                                l��>�ス:o${      course]Custom rForS      .course     なし'合計</span>
                            v class="vh-value">¥${visitorReven">${    v class="vh-value">¥${visitorReven">${    v="statu                                           x1clearScourse]Custom r"                              <diiiiiiiii) {
   i姓"red-600 hover:i姓"red-800 i姓"xs  </erlineol                                         選択解除                                     v "5" x2="12" y2="19"/><line x1="5" y1    = class="vh-value">¥${visitorReven< class="vh-value">¥${visitorR`��� orm(  x1 eourse]Custom rInfo"lv clas'合計</span>
            vorm() {
   grid grid-cols-3 gap-3 mb-3ig0px;">
                       orm(  x1ntLiIn-boCtteaine i() {
   ${!      course]Custom rForS       ? 'col-sp�n-2 grid grid-cols-2 gap-3'���hid    }ig0px;">
                          worm                                      <label�) {
   t ock t姓"xs  ttermedium/mb-1ol姓 *v labelg0px;">
                              <in-bo type="t姓"i  x1  w_sd     _        "() {
   w-full b    r �  </ed px-2 py-1 i姓"smig0px;">
                          w class="vh-value">¥${visitorReven">${worm                                      <label�) {
   t ock t姓"xs  ttermedium/mb-1ol名 *v labelg0px;">
                              <in-bo type="t姓"i  x1  w_sd     _</EventLi"() {
   w-full b    r �  </ed px-2 py-1 i姓"smig0px;">
                          w class="vh-value">¥${visitorReven< class="vh-value">¥${visitorR    <      x1planScoursCtteaine i() {
   ${!      course]Custom rForS       ? ''���col-sp�n-3 }ig0px;">
                          wlabel�) {
   t ock t姓"xs  ttermedium/mb-1ol t� tle�� *v labelg0px;">
                          < coursu  x1  w_sd     _p (d"() {
   w-full b    r �  </ed px-2 py-1 i姓"smig0px;">
                              <op    ]line x1">選択�t-size:12px;font</op    >                                     <op    ]line x1４�-title">"         course]Custom rForS      ?.course     <４' ? ' course] ��謝�>４�-title"></op    >                                     <op    ]line x1３�-title">"         course]Custom rForS      ?.course     <３e ? ' course] ��謝�>３�-title"></op    >                                     <op    ]line x1２�-title">"         course]Custom rForS      ?.course     <２' ? ' course] ��謝�>２�-title"></op    >                                     <op    ]line x1１�-title">"         course]Custom rForS      ?.course     <１' ? ' course] ��謝�>１�-title"></op    >                                     <op    ]line x1� || new Dattenat(4,1）">� || new Dattenat(4,1）</op    >                                     <op    ]line x1� || new Datten非at(4,1）">� || new Datten非at(4,1）</op    >                                     <op    ]line x1� || new Datten振替）">� || new Datten振替）</op    >                                     <op    ]line x1初回体験">初回体験</op    >                                     <op    ]line x1初回無料">初回無料</op    >                                 </ cours                              ="12" x2="19" y2="12"/></svg>
        2="19" y2="12"/></svg>
  orm() {
   i姓"xs i姓"gray-600 mb-3ig0px;">
                      ※ 顧客管理から t� tle��l �自動反�px;fo��ますd��、�|| new Datと�t-si受講する場合� �変更�t-size:12px;fontx2="19" y2="12"/></svg>
        2="19" y2="12"/></svg>
  orm() {
   flex gap-2ig0px;">
                       ="statu  x1    NewS      Btn"() {
   tg"b   -600 i姓"white px-4 py-2 �  </ed hover:tg"b   -700 transi    /i姓"sm">追加v "5" x2="12" y2="19"/><line x1="5" y1=="statu  x1csearlA" S      Btn"() {
   tg"gray-300 i姓"gray-700 px-4 py-2 �  </ed hover:tg"gray-400 transi    /i姓"sm">キャe��炻ルv "5" x2="12" y2="19"/><line x1="5       -value">¥${visitorR       -value">¥${visi`                               i;�ベbo� t 専用l  it�>� t�リe��炰:0,'4':0,'３       vch(Rec   ( �> { this.updateEdiotalCl[year,|month]] |      course]Month�split('-( ;
              tootalCl otal] |     calculate vch(Total( 
                l    nt = isLoer" d => { this.updateEditFie  �数�`                         w     <div cflex items-ce">   justify-te">   h-96olor:var(--text-secondary);">${w     <div ci姓"te">  oss="vh-value">¥${visitorReven">${w     <div cinline-  ock anim   -spin �  </ed-full h-12 w-12 b    r-b-2 b    r-b   -600 mb-4"lv class="vh-value">¥${visitorReven">${wp  <div ci姓"gray-600">yle="w込み中...</p="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
        9" y2="12"/></svg>
 etail">¥${price.to}               to{filter                    co                              <orm() {
   flex justify-between items-ce">   mb-6olor:var(--text-secondary);">${wh2  <div ci姓"2xl  tterbold i姓"gray-800">i;�ベbo� t 出席記録</h2>                             <orm() {
   flex gap-2 items-ce">  ig0px;">
                          =="statu  x1prevMonthRec   "  <div ctg"gray-200 hover:tg"gray-300 px-3 py-2 �  </ed transi    /i姓"sm"        isLoer" ds? 'disabled ��謝�>◀ 前widv "5" x2="12" y2="19"/><line x1="5" y1    =in-bo                               <diiiiitype="month"                               <diiiii  x1monthScoursor"                               <diiiiiline x1="      course]Month}"                                      ) {
   px-3 py-2 b    r b    r-b   -300 tg"b   -50/i姓"b   -800 �  </ed  ttermedium/i姓"sm  tcus:outline- one  tcus:rgin-2  tcus:rgin-b   -500"                              <di/g0px;">
                          =="statu  x1  x MonthRec   "  <div ctg"gray-200 hover:tg"gray-300 px-3 py-2 �  </ed transi    /i姓"sm"        isLoer" ds? 'disabled ��謝�>次wid ▶v "5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
        2="19" y2="12"/></svg>
  orm() {
   tg"white �  </ed-lg shadow mb-4"l        19" y2="12"/></svg>
  orm() {
   flex b    r-b overflow-x-autoolor:var(--text-secondary);">${{{{{${eswidt��日| []火t��日| []水t��日| []木t��日| []金t��日|, '�;�ベbo� t ']l�</tday] ��`                                     w="statu  x1day-  day}"i) {
   px-4 py-2 i姓"sm  ttermedium/whitespー-nowrap ="      course]Day]    day]? 'i姓"b   -600 b    r-b-2 b    r-b   -600 tg"b   -50 ���i姓"gray-600 hover:i姓"b   -600 hover:tg"gray-50 }ig0px;">
                          {{{{torR  day}s="vh-value">¥${visitorReven">${    v "5" x2="12" y222222222222222222222222222` </tr>(''                               < class="vh-value">¥${visitorR       ="vh-value">¥${visitorR orm() {
   tg"white �  </ed-lg shadow p-6olor:var(--text-secondary);">${w     <div cflex justify-between items-ce">   mb-4"l        19" y2="12"/></svg>
 ">${wh3  <div ci姓"lg ftterbold i姓"gray-800">i;�ベbo� t 参加者一覧v h3ss="vh-value">¥${visitorReven">${w="statu  x1add vch(Par��ci</s Btn"() {
   tg"green-600 i姓"white px-4 py-2 �  </ed hover:tg"green-700 transi    /i姓"sm">s="vh-value">¥${visitorReven">${    + 参加者を追加                                 v "5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
 " y1=     <div coverflow-x-autoolor:var(--text-secondary);">${{{{{vtable() {
   w-full t姓"smig0px;">
                              <thea                                           wtr  <div ctg"gray-100 b    r-b                                               vthe) {
   px-3 py-3 i姓"left  ttersemiboldor  yle="width: 100px;olt��Col（姓）</th                                              vthe) {
   px-3 py-3 i姓"left  ttersemiboldor  yle="width: 100px;olt��Col（�ol）</th                                              vthe) {
   px-3 py-3 i姓"ce">    ttersemiboldor  yle="width: 60px;ol①</th                                              vthe) {
   px-3 py-3 i姓"ce">    ttersemiboldor  yle="width: 60px;ol②</th                                              vthe) {
   px-3 py-3 i姓"ce">    ttersemiboldor  yle="width: 60px;ol③</th                                              vthe) {
   px-3 py-3 i姓"left  ttersemiboldor  yle="width: 120px;olt��金（円）</th                                              vthe) {
   px-3 py-3 i姓"left  ttersemiboldor  yle="width: 200px;ol備考</th                                              vthe) {
   px-3 py-3 i姓"ce">    ttersemiboldor  yle="width: 80px;olt��作w th                                          v tr                                      v thea                                       vtbody                                          ="     even8Att   searD   l           0 ? `s="vh-value">¥${visitorReven    oooo        vtr                                                  vtde)olsp�n="8"e) {
   px-3 py-8 i姓"ce">   i姓"gray-500ol                                             oooooooo参加者がいません。「+ 参加者を追加」ボew Da�から追加�t-size:12px;font。                                                 v t                                               v tr                                          `���     even8Att   searD   l�</t(par��ci</s , i</ex)休�`                                             wtr  <div ct    r-b hover:tg"gray-50">                                             oooovtde) {
   px-3 py-3                                                       win-bo                               <diiiiiiiiiiiiiiiiiiiiiiiiitype="t姓"i                                                         data-ev   -</el x1        "(                                                         data-ev   -i</exx1="i</ex�"                              <diiiiiiiiiiiiiiiiiiiiiiiiiline x1="par��ci</s .        ]    '�"                              <diiiiiiiiiiiiiiiiiiiiiiiii) {
   w-full b    r �  </ed px-2 py-1 i姓"smi                              <diiiiiiiiiiiiiiiiiiiiiiiiiplaceholder="姓i                              <diiiiiiiiiiiiiiiiiiiii/g0px;">
                                          w t                                               oooovtde) {
   px-3 py-3                                                       win-bo                               <diiiiiiiiiiiiiiiiiiiiiiiiitype="t姓"i                                                         data-ev   -</el x1</EventLi"(                                                         data-ev   -i</exx1="i</ex�"                              <diiiiiiiiiiiiiiiiiiiiiiiiiline x1="par��ci</s .ddEventLis    '�"                              <diiiiiiiiiiiiiiiiiiiiiiiii) {
   w-full b    r �  </ed px-2 py-1 i姓"smi                              <diiiiiiiiiiiiiiiiiiiiiiiiiplaceholder="名i                              <diiiiiiiiiiiiiiiiiiiii/g0px;">
                                          w t                                               oooovtde) {
   px-3 py-3 i姓"ce">  ig0px;">
                          ">${    {{{{        w="statu                                             oooooooooooodata-ev   -week  week1"(                                                         data-ev   -i</exx1="i</ex�"                              <diiiiiiiiiiiiiiiiiiiiiiiiiy)';
  ev   -att   sear-tle"w-10 h-10 �  </ed b    r t姓"sm $> { this.updateEditFieeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeepar��ci</s .week1     <○'�? 'tg"green-500 b    r-green-600 i姓"white �� { this.updateEditFieeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee'tg"red-500 b    r-red-600 i姓"white  { this.updateEditFieeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee} hover:op�"ty-80 transi    / tterboldol { this.updateEditFieeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee="par��ci</s .week1     <○'�? '○'�: <×(合計</span>
                                    oooov "5" x2="12" y2="19"/><line x1="5" y1            oooooooow t                                               oooovtde) {
   px-3 py-3 i姓"ce">  ig0px;">
                          ">${    {{{{        w="statu                                             oooooooooooodata-ev   -week  week2"(                                                         data-ev   -i</exx1="i</ex�"                              <diiiiiiiiiiiiiiiiiiiiiiiiiy)';
  ev   -att   sear-tle"w-10 h-10 �  </ed b    r t姓"sm $> { this.updateEditFieeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeepar��ci</s .week2     <○'�? 'tg"green-500 b    r-green-600 i姓"white �� { this.updateEditFieeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee'tg"red-500 b    r-red-600 i姓"white  { this.updateEditFieeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee} hover:op�"ty-80 transi    / tterboldol { tttttttttttttttttttttttttttttttttttttttttttttttttttttt="par��ci</s .week2     <○'�? '○'�: <×(合計</span>
                                    oooov "5" x2="12" y2="19"/><line x1="5" y1            oooooooow t                                               oooovtde) {
   px-3 py-3 i姓"ce">  ig0px;">
                                          oooov="statu                                             oooooooooooodata-ev   -week  week3"(                                                         data-ev   -i</exx1="i</ex�"                              <diiiiiiiiiiiiiiiiiiiiiiiiiy)';
  ev   -att   sear-tle"w-10 h-10 �  </ed b    r t姓"sm $> { this.updateEditFieeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeepar��ci</s .week3     <○'�? 'tg"green-500 b    r-green-600 i姓"white �� { this.updateEditFieeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee'tg"red-500 b    r-red-600 i姓"white  { this.updateEditFieeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee} hover:op�"ty-80 transi    / tterboldol { tttttttttttttttttttttttttttttttttttttttttttttttttttttt="par��ci</s .week3     <○'�? '○'�: <×(合計</span>
                                    oooov "5" x2="12" y2="19"/><line x1="5" y1            oooooooow t                                               oooovtde) {
   px-3 py-3                                                       win-bo                               <diiiiiiiiiiiiiiiiiiiiiiiiitype="numb  ii                                                         data-ev   -</el x1<ei"(                                                         data-ev   -i</exx1="i</ex�"                              <diiiiiiiiiiiiiiiiiiiiiiiiiline x1="par��ci</s .dee'|| 0�"                              <diiiiiiiiiiiiiiiiiiiiiiiii) {
   w-full b    r �  </ed px-2 py-1 i姓"sm i姓"righti                              <diiiiiiiiiiiiiiiiiiiiiiiiiplaceholder="0"                              <diiiiiiiiiiiiiiiiiiiiiiiiimin="0"                              <diiiiiiiiiiiiiiiiiiiii/g0px;">
                                          w t                                               oooovtde) {
   px-3 py-3                                                       win-bo                               <diiiiiiiiiiiiiiiiiiiiiiiiitype="t姓"i                                                         data-ev   -</el x1memo"(                                                         data-ev   -i</exx1="i</ex�"                              <diiiiiiiiiiiiiiiiiiiiiiiiiline x1="par��ci</s .memos    '�"                              <diiiiiiiiiiiiiiiiiiiiiiiii) {
   w-full b    r �  </ed px-2 py-1 i姓"smi                              <diiiiiiiiiiiiiiiiiiiiiiiiiplaceholder="備考"                              <diiiiiiiiiiiiiiiiiiiii/g0px;">
                                          w t                                               oooovtde) {
   px-3 py-3 i姓"ce">  ig0px;">
                                          oooov="statu                                             oooooooooooodata-dcoute-ev   -i</exx1="i</ex�"                              <diiiiiiiiiiiiiiiiiiiiiiiiiy)';
  dcoute-ev   -par��ci</s -tle"i姓"red-600 hover:i姓"red-800 i姓"xs">                                             oooooooooooo削除                                                     v "5" x2="12" y2="19"/><line x1="5" y1            oooooooow t                                               v tr                                          ` </tr>(''                                   oooov tbody                                      wtfoos                                          wtr  <div ctg"b   -50/b    r-t-2 b    r-b   -300ol                                             vtde)olsp�n="5"e) {
   px-3 py-4 i姓"right  tterbold i姓"gray-800">合計金額:w t                                               vtde) {
   px-3 py-4  tterbold i姓"b   -600 i姓"lg">¥${ otal.toLocalemargin )}v t                                               vtde)olsp�n="2"lv t                                           v tr                                      v tfoos                                  v table                              ="12" x2="19" y2="12"/></svg>
 " y1=     <div cmt-6/p-4 tg"gray-50 �  </ed b    r"l        19" y2="12"/></svg>
 ">${wh4() {
   fttersemibold mb-2 i姓"sm">使い方</h4l        19" y2="12"/></svg>
 ">${wul�) {
   i姓"xs i姓"gray-600 spー-y-1ol                                     <li>• 氏Col・t��金・備考は直接入力できますv li>                                     <li>• ①②③l  it�ew Da�を�-tit�ッ�-ti��るとn<ondary)';
  i姓"green-600  tterboldol○</}</sp →n<ondary)';
  i姓"red-600  tterboldol×</}</sp →n<ondary)';
  i姓"gray-600  tterboldol休</}</sp →n<ondary)';
  i姓"gray-400  tterboldol-</}</sp と切り替わりますv li>                                     <li>• 入力内容は自動保存x;fo��ますv li>                                     <li>• t��金の合計金額l �自動で表示x;fo��ますv li>                                 </ulg0px;">
                      < class="vh-value">¥${visitorR       ="vh-value">¥${visi       -value">¥${visi`                                  TimeSchedule( �> { this.updateEdiotalCldaycasseswidt��日| []火t��日| []水t��日| []木t��日| []金t��日|]gth > 0 ?
        otalCldayLabelcass{swidt��日|:'MON',]火t��日|:'TUE',]水t��日|:'WED',]木t��日|:'THU',]金t��日|:'FRI'ngth > 0 ?
        otalClhoursasses16:00',]17:00',]18:00',]19:00',]20:00',]21:00',]22:00'];�                 {filter                    co      ="vh-value">¥${visitorR orm() {
   page-hea   olor:var(--text-secondary);">${<class="vh-value">¥${visitorReven">${wh2>タイムe">d��| ne��Datルv h2>                             ">${wp  <div csubtitle">週間it�>�e">da��>d��| ne��Datルv p="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
        9" y2="12"/></svg>
 g>
  orm() {
   otat   -yardor  yle="overflow-x:auto;padr" d:0;ig0px;">
                      vtable(  yle="width:100%;b    r-)ollapse:)ollapse;table-layout:fixed;ig0px;">
                          vthea                                       wtr                                          wth(  yle="width:70px;padr" d:16px 8px;i姓"align:ce">  ;backg�  </:rgba(0,0,0,0.02);b    r-bo" xm:1px solidilir(--b    r);fttersize:11px;)olor:lir(--i姓"seotadary);olt��間</th                                          ${daycl�</td休�`wth(  yle="padr" d:16px 8px;i姓"align:ce">  ;backg�  </:rgba(0,0,0,0.02);b    r-bo" xm:1px solidilir(--b    r);fttersize:13px;ftterweight:600;out>  -sp�c" d:-0.2px;ol  d}<br><ondar  yle="fttersize:10px;)olor:lir(--i姓">  tiary);ftterweight:500;ol  dayLabelc[d]}v }</sp</th ` </tr>(''                                   oooov tr                                  v thea                                   vtbody                                      ${hoursl�</thour =��'                                         otalClhourNumassparseInt(hour 
                lllllllllllllllllllllllll{filter vtr                                              vtde  yle="padr" d:10px 8px;i姓"align:ce">  ;backg�  </:rgba(0,0,0,0.01);b    r-bo" xm:1px solidilir(--b    r);fttersize:12px;ftterweight:500;)olor:lir(--i姓">  tiary);v  tical"align:top;ol  hour}v t                                               ${daycl�</tday] ��> { this.updateEditFieeeeeeeeeeeeeeeeeeeeeeeeeeeeeotalClc {
 ecass nt = timeScheduleD   [day]    []).fil>  (c] ��> { this.updateEditFieeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeotalClstartHour =sparseInt(c time�split(':')[0] 
                lllllllllllllllllllllllllllllllllllll{filterstartHour >=lhourNuma&&rstartHour <lhourNuma+ 1                to':1,'3':1,'�Locaaaaaaaaaaaaaaaaa}                 to':1,'3':1,'�Locaaaaaaaaaaaaaaaaa{filter vtde  yle="padr" d:4px 6px;b    r-bo" xm:1px solidilir(--b    r);v  tical"align:top;ol                lllllllllllllllllllllllllllllllllllll${) {
 esl�</t'休�`                                                          orm(  yle="backg�  </:${).)olor};)olor:#fff;b    r-radius:lir(--radius"xs);padr" d:8px 10px;margin:3px 0;fttersize:11px;box-shadow:0 2px 6px ${).)olor}40;transi    :lir(--iransi    );ol                lllllllllllllllllllllllllllllllllllll         orm(  yle="ftterweight:600;fttersize:12px;ol  c time�w orm                                          llllllllllll         orm(  yle="op�"ty:0.9;margin-top:3px;ftterweight:500;ol  c.ntLi}w orm                                          llllllllllll         orm(  yle="op�"ty:0.65;fttersize:10px;margin-top:2px;ol  c venue}w orm                                          llllllllllll    w orm                                          llllllllllll` </tr>(''                                   oooo    oooooooov t  e                to':1,'3':1,'�Locaaaaaaaaaaaaa} </tr>(''                                   oooooooov tr e                to':1,'3':1,'�Locaaaaa} </tr>(''                                   v tbody                              v table                                 -value">¥${visitorR       -value">¥${visi`                                  MonthlySchedule( �> { this.updateEdiotalCl[year,|month]] |      course]Month�split('-( l�</tNumb   ;
              tootalCldaycInMonth] |new D  e(year,|month, 0).getD  e( ;
              tootalClddEveDayOfWeek�|new D  e(year,|month - 1, 1).getD y( ;
              tootalCldayntLicassesw��| swid',]火',]水',]木',]金',]土|]gth > 0 ?
        otalClvenuecasses天神校',]大橋校',]照葉校'];�                 // De>  mine/whichlvenuecahavelc {
 ecaon/whichlday]oflweek
              tootalCldayOfWeekVenuecass{ngth > 0 ?
        otalCldayMapass{swidt��日|:1,]火t��日|:2,]水t��日|:3,]木t��日|:4,]金t��日|:5ngth > 0 ?
        Objurs.e">ries nt =  cheduleD   ).forEach(([dayntLi,lc {
 ec])] ��> { this.updateEditFieotalCldow =ldayMap[dayntLi]gth > 0 ?
                dow => { this.updateEditFie    otalClvenueSet�|new Set( ;
              totFie    o {
 eslforEach(c] ��> { this.updateEditFieeeeeeeee    c.loca         <天神')lvenueSet.adr(s天神校'                 to':1,'3':1,'�elcee    c.loca         <大橋')lvenueSet.adr(s大橋校'                 to':1,'3':1,'�elcee    c.loca         <照葉')lvenueSet.adr(s照葉校'                 to':1,'3':}                 to':1,'3':dayOfWeekVenuec[dow]] |venueSet                to':1,                  }                    let rowcass''                tofor (let d� 1  d�<=ldaycInMonth  d++ => { this.updateEditFieotalCldow =lnew D  e(year,|month - 1, d).getD y( ;
              totFieotalClisWeek    =ldow =   0    dow =   6;
              totFieotalCldayColor =lisWeek    ? '#ff3b30 ���dow =   3 ? '#34c759'�: <#1d1d1f'                totFieotalClbgColor =lisWeek    ? '#fef2f2'�: <#fff'                       rowca+=r vtr(  yle="backg�  </:${bgColor};ol                lllllllllvtde  yle="padr" d:10px 16px;b    r-bo" xm:1px solidilir(--b    r);i姓"align:ce">  ;ftterweight:500;fttersize:14px;ol  d}< t                           vtde  yle="padr" d:10px 16px;b    r-bo" xm:1px solidilir(--b    r);i姓"align:ce">  ;)olor:  dayColor};ftterweight:600;fttersize:13px;ol  dayntLic[dow]}< t                           ${venuecl�</tv] ��> { this.updateEditFieeeeeeeeeotalClhasC {
  =ldayOfWeekVenuec[dow]?.has(v                 to':1,'3':1,'�{filter vtde  yle="padr" d:10px 16px;b    r-bo" xm:1px solidilir(--b    r);i姓"align:ce">  ;fttersize:14px;ol                                 ${isWeek    ? '<ondar  yle=")olor:lir(--red);fttersize:12px;ftterweight:500;ol休校v }</sp'�: hasC {
  ? '<ondar  yle=")olor:lir(--acce">);ftterweight:600;fttersize:16px;ol○</}</sp'�: <<ondar  yle=")olor:lir(--i姓">  tiary);ol-</}</sp'合計</span>
                < t  e                to':1,'3':} </tr>(''                       v tr e                to�                 {filter                    co      ="vh-value">¥${visitorR orm() {
   page-hea   olor:var(--text-secondary);">${<class="vh-value">¥${visitorReven">${wh2>wid間i">d��| ne��Datルv h2>                             ">${wp  <div csubtitle">${year}年${month}widl  i�>d��| ne��Datルv p="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
 ">${<clar  yle="display:flex;gap:10px;align-items:ce">  ;ig0px;">
                          =="statu  x1prevMonth"() {
   ttn ttn"seotadary ttn"sm">◀ 前widv "5" x2="12" y2="19"/><line x1="5" y1    =in-bo type="month"   x1monthScoursorOverview"iline x1="      course]Month}" ) {
   ftrm-in-bo"i  yle="padr" d:8px 14px;fttersize:14px;oi/g0px;">
                          =="statu  x1  x Month"() {
   ttn ttn"seotadary ttn"sm">次wid ▶v "5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
        2="19" y2="12"/></svg>
  orm() {
   otat   -yardor  yle="overflow-x:auto;padr" d:0;ig0px;">
                      vtable(  yle="width:100%;b    r-)ollapse:)ollapse;ig0px;">
                          vthea                                       wtr                                          wth(  yle="padr" d:14px 16px;width:60px;i姓"align:ce">  ;">日w th                                          vthe  yle="padr" d:14px 16px;width:60px;i姓"align:ce">  ;">曜日</th                                          ${venuecl�</tv] ��`wth(  yle="padr" d:14px 16px;i姓"align:ce">  ;">${v}</th ` </tr>(''                                   oooov tr                                  v thea                                   vtbody ${rowc}v tbody                              v table                                 -value">¥${visitorR       -value">¥${visi`                                  IalCrursors )�> { this.updateEdi{filter                    co      ="vh-value">¥${visitorR orm() {
   page-hea   olor:var(--text-secondary);">${<class="vh-value">¥${visitorReven">${wh2>講師 t� t�フィDatルv h2>                             ">${wp  <div csubtitle">POSSE D nce Aca  my l  i��da��>d��itle"�ew Datv p="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
        9" y2="12"/></svg>
 g>
  orm(  yle="display:grid;grid-template-)olumns:repeat(2,1fr);gap:24px;ol                                    ialCrursorD   l�</tialC休�`                                 w     <div cinlCrursor-yardo                                      w     <div cinlCrursor-hea   olor:var(--text-secondary);">${</svg>
 g>
  orm(  yle="display:flex;justify-ttat   :spー-between;align-items:flex-start;ol                lllllllllllllllllllllllllllllworm                                                  w     <div cinlCrursor-ntLi">${inlC.ntLi}w orm                                          llllllllw     <div cinlCrursor-stagi">${inlC.stagintLi�w orm                                          llllw orm                                          llllwondary)';
  badge badge"b   ">${inlC.genre}</}</sp                                         v orm                                          vorm(  yle="margin-top:14px;fttersize:12px;)olor:lir(--i姓"seotadary);display:flex;gap:20px;ol                                         llllwonda>tyle��widt��:o${inlC.birthD  e}</}</sp                                         llllwonda>キャe��ア:o${inlC.yareerStart}</}</sp                                         v orm                                      v orm                                      v     <div cinlCrursor-bodyig0px;">
                          {{{{torR  inlC.profile ? `s="vh-value">¥${visitorReven    oooo        v     <div cinlCrursor-surs                                                      worm() {
   inlCrursor-surs   -title"> t� t�フィDatルv orm                                          llllllllwpr  yle="fttersize:13px;line-height:1.7;)olor:lir(--i姓"primary);op�"ty:0.85;">${inlC.profile}v p="12" y2="19"/><line x1="5" y1        llllllllw class="vh-value">¥${visitorReven">${        `���'合計</span>
                            ${inlC.messagi ? `s="vh-value">¥${visitorReven    oooo        v     <div cinlCrursor-surs                                                      worm() {
   inlCrursor-surs   -title"> t�>�e"�>�ジv orm                                          llllllllwpr  yle="fttersize:13px;line-height:1.7;)olor:lir(--i姓"primary);op�"ty:0.85;">${inlC.messagi}v p="12" y2="19"/><line x1="5" y1        llllllllw class="vh-value">¥${visitorReven">${        `���'合計</span>
                            v     <div cinlCrursor-surs                                                  worm() {
   inlCrursor-surs   -title">受賞歴w orm                                          llllworm(  yle="display:flex;flex-wrap:wrap;gap:6px;ol                                         llllllll${inlC.awardcl�</ta] ��`wondar  yle="display:inline-  ock;fttersize:11px;backg�  </:rgba(0,0,0,0.04);padr" d:5px 10px;b    r-radius:8px;)olor:lir(--i姓"primary);ftterweight:500;ol  a}</}</sp` </tr>(''                                   oooo    oooov orm                                          v orm                                          ${inlC.otherExperiencel       > 0 ? `s="vh-value">¥${visitorReven                v     <div cinlCrursor-surs                                                      worm() {
   inlCrursor-surs   -title"> ��l  他経歴w orm                                          llll    worm(  yle="display:flex;flex-wrap:wrap;gap:6px;ol                                         llllllllllll${inlC.otherExperiencel�</te] ��`wondar  yle="display:inline-  ock;fttersize:11px;backg�  </:rgba(0,113,227,0.06);padr" d:5px 10px;b    r-radius:8px;)olor:lir(--acce">);ftterweight:500;ol  e}</}</sp` </tr>(''                                   oooo    oooo    w class="vh-value">¥${visitorReven">${        oooov class="vh-value">¥${visitorReven">${        `���'合計</span>
                            v     <div cinlCrursor-surs                                                  worm() {
   inlCrursor-surs   -title">it�>�e">da�経歴w orm                                          llllworm(  yle="display:flex;flex-wrap:wrap;gap:6px;ol                                         llllllll${inlC.lessoncl�</tl] ��`wondar  yle="display:inline-  ock;fttersize:11px;backg�  </:rgba(52,199,89,0.08);padr" d:5px 10px;b    r-radius:8px;)olor:lir(--green);ftterweight:500;ol  l}</}</sp` </tr>(''                                   oooo    oooov orm                                          v orm                                      v class="vh-value">¥${visitorReven">${w class="vh-value">¥${visitorReven` </tr>(''                                  -value">¥${visitorR       -value">¥${visi`                            setupAtt   sear vch(s )�> { this.updateEdidocum   .getElem   ById('att   searOverviewTab')?.add vch(List  er('click', ()] ��> { this.updateEditFie     att   searTabass'overview'                totFie           ( ;
              to}                 todocum   .getElem   ById('att   searRec   Tab')?.add vch(List  er('click', ()] ��> { this.updateEditFie     att   searTabass'rec   '                totFie           ( ;
              to}                 to// wid選択in-bol  i��da�bo� t （出席記録）               tootalClmonthScoursor =ldocum   .getElem   ById('monthScoursor'                 to    monthScoursor => { this.updateEditFiemonthScoursor.add vch(List  er('change', (e)] ��> { this.updateEditFietFie      coursMonth(e.target.line                  to':1,}                 to                  // wid選択in-bol  i��da�bo� t （ t�ッe"�e��Da�Datド）               tootalClmonthScoursorOverview =ldocum   .getElem   ById('monthScoursorOverview'                 to    monthScoursorOverview => { this.updateEditFiemonthScoursorOverview.add vch(List  er('change', (e)] ��> { this.updateEditFietFie      coursMonth(e.target.line                  to':1,}                 to                  otalClprevMonthBtn =ldocum   .getElem   ById('prevMonth( ;
              tootalCl  x MonthBtn =ldocum   .getElem   ById('  x Month( ;
              tootalClprevMonthRec   Btn =ldocum   .getElem   ById('prevMonthRec   ( ;
              tootalCl  x MonthRec   Btn =ldocum   .getElem   ById('  x MonthRec   '                 to    prevMonthBtn => { this.updateEditFieprevMonthBtn.add vch(List  er('click', (e)] ��> { this.updateEditFietFiee.prevch(Default( ;
              totFie    e.stopProp�ga    ( ;
              totFie         changeMonth(-1                 to':1,}                 to                        x MonthBtn => { this.updateEditFie  x MonthBtn.add vch(List  er('click', (e)] ��> { this.updateEditFietFiee.prevch(Default( ;
              totFie    e.stopProp�ga    ( ;
              totFie         changeMonth(1                 to':1,}                 to                      prevMonthRec   Btn => { this.updateEditFieprevMonthRec   Btn.add vch(List  er('click', (e)] ��> { this.updateEditFietFiee.prevch(Default( ;
              totFie    e.stopProp�ga    ( ;
              totFie         changeMonth(-1                 to':1,}                 to                        x MonthRec   Btn => { this.updateEditFie  x MonthRec   Btn.add vch(List  er('click', (e)] ��> { this.updateEditFietFiee.prevch(Default( ;
              totFie    e.stopProp�ga    ( ;
              totFie         changeMonth(1                 to':1,}                 to                  eswidt��日| []火t��日| []水t��日| []木t��日| []金t��日|, '�;�ベbo� t ']lforEach(day] ��> { this.updateEditFiedocum   .getElem   ById(`day-  day}`)?.add vch(List  er('click', ()] ��> { this.updateEditFie          course]Day] lday;
              totFie               ( ;
              to':1,}                 to                  todocum   .queryScoursorAll('.att   sear-tle').forEach(ttn  ��> { this.updateEditFiebtn.add vch(List  er('click', ()] ��> { this.updateEditFie    otalClc {
 I  =lbtn.getAttribute('data-c {
 '                 to':1,'3':otalClweek�|btn.getAttribute('data-week'                 to':1,'3':nt = toggleAtt   sear(c {
 I ,lweek ;
              to':1,}                 to                  todocum   .queryScoursorAll('.add-sd     -tle').forEach(ttn  ��> { this.updateEditFiebtn.add vch(List  er('click', ()] ��> { this.updateEditFie    otalClday] |btn.getAttribute('data-add-day'                 to':1,'3':otalClloca      |btn.getAttribute('data-add-loca    '                 to':1,'3':otalClc {
 ntLis |btn.getAttribute('data-add-c {
 '                 to':1,'3':     a" S      ToC {
 (day,lloca    ,lc {
 ntLi ;
              to':1,}                 to                  to// tyle��編集it�ew Da�               todocum   .queryScoursorAll('.edit-sd     -tle').forEach(ttn  ��> { this.updateEditFiebtn.add vch(List  er('click', ()] ��> { this.updateEditFie    otalClday] |btn.getAttribute('data-edit-sd     -day'                 to':1,'3':otalClloca      |btn.getAttribute('data-edit-sd     -loca    '                 to':1,'3':otalClc {
 ntLis |btn.getAttribute('data-edit-sd     -c {
 '                 to':1,'3':otalCl        ] |btn.getAttribute('data-edit-sd     -l   ntLi'                 to':1,'3':otalClddEventLis |btn.getAttribute('data-edit-sd     -ddEventLi'                 to':1,'3':      tartEditS      (day,lloca    ,lc {
 ntLi,l        ,lddEventLi ;
              to':1,}                 to                  to// tyle��削除it�ew Da�               todocum   .queryScoursorAll('.dcoute-sd     -tle').forEach(ttn  ��> { this.updateEditFiebtn.add vch(List  er('click', ()] ��> { this.updateEditFie    otalClday] |btn.getAttribute('data-dcoute-day'                 to':1,'3':otalClloca      |btn.getAttribute('data-dcoute-loca    '                 to':1,'3':otalClc {
 ntLis |btn.getAttribute('data-dcoute-c {
 '                 to':1,'3':otalCl        ] |btn.getAttribute('data-dcoute-l   ntLi'                 to':1,'3':otalClddEventLis |btn.getAttribute('data-dcoute-ddEventLi'                 to':1,'3':     dcouteS      (day,lloca    ,lc {
 ntLi,l        ,lddEventLi ;
              to':1,}                 to                  to// tyle��編集保存x��キャe��炻ル               todocum   .getElem   ById('saveEditS      Ble')?.add vch(List  er('click', ()] ��      aveEditS      ()                 todocum   .getElem   ById('csearlEditS      Ble')?.add vch(List  er('click', ()] ��> { this.updateEditFie     editingS       =lnull                totFie           ( ;
              to}                 to// tyle��検索（ t�アルタイム）- フォ>�カス維持l  i��め検索結果l  i��更新
              tootalClsearchIn-bo =ldocum   .getElem   ById('sd     _search_in-bo'                 to    searchIn-bo => { this.updateEditFie// in-bol;�ベbo� t で検索結果l  i��更新（全体を再it�>� t�リe��炰�t-s�い）               tooooosearchIn-bo.add vch(List  er('in-bo', (e)] ��> { this.updateEditFietFie      d     SearchTermasse.target.line                 to':1,'3':          d     SearchTerm.trim() �> { this.updateEditFieeeeeeeee      d     SearchResults] |      carchCustomerByntLi       d     SearchTerm                 to':1,'3':}�elcee> { this.updateEditFieeeeeeeee      d     SearchResults] |[]gth > 0 ?
            eeeeeeee      course]CustomerForS       =lnull                totFie'3':}               totFie'3':// w��索結果l  i��を更新（フォ>�カスを維持）               toooooeeee     updateSearchResults( ;
              to':1,}                 tooooo { this.updateEditFie// フォ>�カス時にもw��索結果l��表示               tooooosearchIn-bo.add vch(List  er(' tcus', (e)] ��> { this.updateEditFietFie          d     SearchTerm.trim() �> { this.updateEditFieeeeeeeee      d     SearchResults] |      carchCustomerByntLi       d     SearchTerm                 to':1,'3':eeee     updateSearchResults( ;
              to':1,,,,,}               totFie}                 to                  // 顧客選択（初期it�>� t�リe��炰時）               todocum   .queryScoursorAll('. cours-customer-tle').forEach(ttn  ��> { this.updateEditFiebtn.add vch(List  er('click', ()] ��> { this.updateEditFie    otalClcustomerI  =lbtn.getAttribute('data- cours-customer-i '                 totFie    otalClcustomer] |     customers.find(c] ��c.id =   customerI                  totFie        customer �> { this.updateEditFieeeeeeeee      coursCustomerForS       customer ;
              to':1,,,,,}               totFie}                 to                  to// 顧客選択解除（初期it�>� t�リe��炰時）               todocum   .getElem   ById('clearScourse]Customer')?.add vch(List  er('click', ()] ��> { this.updateEditFie      course]CustomerForS       =lnull                totFie      d     SearchTermass''                totFie      d     SearchResults] |[]gth > 0 ?
                 updateSeourse]CustomerInfo( ;
              to':1,// w��索入力欄を�-tit�ア
              to':1,otalClsearchIn-bo =ldocum   .getElem   ById('sd     _search_in-bo'                 tooooo    searchIn-bo =searchIn-bo.line ass''                totFie// w��索結果l���-tit�ア
              to':1,     updateSearchResults( ;
              to':1,// プitlea�を�t�セッe��
              to':1,otalClplanSeours =ldocum   .getElem   ById('  w_sd     _plan'                 tooooo    planSeours)lplanSeours.line ass''                to                  to// l;�ベbo� t 専用l  i��da�bo� t �t�スナ>�               todocum   .getElem   ById('add vch(Par��ci</s Ble')?.add vch(List  er('click', ()] ��> { this.updateEditFie     add vch(Par��ci</s ( ;
              to}                 to// l;�ベbo� t 出席it�ew Da�               todocum   .queryScoursorAll('.ev   -att   sear-tle').forEach(ttn  ��> { this.updateEditFiebtn.add vch(List  er('click', ()] ��> { this.updateEditFie    otalCli</ex =sparseInt(btn.getAttribute('data-ev   -i</ex')                 totFie    otalClweek�|btn.getAttribute('data-ev   -week'                 totFie    otalClcurr    =l     even8Att   searD   [i</ex][week]s    '                totFie    otalCl  x  =lcurr    =   <○'�? '×'�: <○'                to':1,'3':     even8Att   searD   [i</ex][week]s=l  x                 to':1,'3':      aveEven8Att   sear( ;
              totFie               ( ;
              to':1,}                 to                  to// l;�ベbo� t フィDatルド入力               todocum   .queryScoursorAll('[data-ev   -</el ]').forEach(in-bo  ��> { this.updateEditFiein-bo.add vch(List  er('change', (e)] ��> { this.updateEditFietFieotalCli</ex =sparseInt(e.target.getAttribute('data-ev   -i</ex')                 totFie    otalCl</el asse.target.getAttribute('data-ev   -</el '                 totFie    let line asse.target.line                 to':1,'3':               totFie'3':// w��金は数値に変換               tooooooooo    </el as   <fee' �> { this.updateEditFieeeeeeeeeline assparseFloat(line  '|| 0                totFie'3':}               totFie'3':               to':1,'3':     even8Att   searD   [i</ex][</el ]] |vine                 to':1,'3':      aveEven8Att   sear( ;
              totFie}                 tooooo// リアルタイム更新（t��金のi��）               tooooo    in-bo.getAttribute('data-ev   -</el ' as   <fee' �> { this.updateEditFieeeeein-bo.add vch(List  er('in-bo', (e)] ��> { this.updateEditFietFieeeeeotalCli</ex =sparseInt(e.target.getAttribute('data-ev   -i</ex')                 totFie    eeeeotalClline assparseFloat(e.target.line  '|| 0                totFie'3':::::     even8Att   searD   [i</ex].dee' |vine                 to':1,'3':::::           ( ;
              to':1,,,,,}                 tooooo                  }                   // l;�ベbo� t 参加者削除                 docum   .queryScoursorAll('.dcoute-ev   -par��ci</s -tle').forEach(ttn  ��> { this.updateEditFiebtn.add vch(List  er('click', ()] ��> { this.updateEditFie    otalCli</ex =sparseInt(btn.getAttribute('data-dcoute-ev   -i</ex')                 totFie         dcoute vch(Par��ci</s (i</ex ;
              to':1,}                 to                  todocum   .getElem   ById('saveNewS      Ble')?.add vch(List  er('click', ()] ��      aveNewS      ()                 todocum   .getElem   ById('csearlA" S      Ble')?.add vch(List  er('click', ()] ��> { this.updateEditFie     showA" S      Formassfals                 to':1,      course]C {
 ForA"  =lnull                totFie      course]CustomerForS       =lnull                totFie      d     SearchTermass''                totFie      d     SearchResults] |[]gth > 0 ?
                       ( ;
              to}                 to// t��習会の参加人数入力               todocum   .queryScoursorAll('.prac��ce-in-bo' .forEach(in-bo  ��> { this.updateEditFiein-bo.add vch(List  er('change', async (e)] ��> { this.updateEditFietFieotalClday] |e.target.getAttribute('data-prac��ce-day'                 to':1,'3':otalClweek�|e.target.getAttribute('data-prac��ce-week'                 totFie    otalClline assparseInt(e.target.line  '|| 0                totFie'3':otalClprac��ceKey] |`t��習会_  day}`                totFie        !     att   searD   [prac��ceKey] �> { this.updateEditFieeeeeeeee     att   searD   [prac��ceKey]ass{ngth > 0 ?
                }               totFie'3':     att   searD   [prac��ceKey][week]s=lvine                 to':1,'3':await�      aveAtt   sear(prac��ceKey,:     att   searD   [prac��ceKey] ;
              totFie               ( ;
              to':1,}                 to                  to// l��ッ�-ti��ップit�ew Da�               todocum   .getElem   ById('backupBle')?.add vch(List  er('click', async ()] ��> { this.updateEditFieawait�     createBackup( ;
              to}               }             // l��ッ�-ti��ップ機能             async createBackup( �> { this.updateEdiotalClstatusEl =ldocum   .getElem   ById('backupStatus'                 to    statusEl)lstatusEl.i姓Ctat   ass'l��ッ�-ti��ップ作成中...'                totry=> { this.updateEditFieotalClbackupass{ timestamp:lnew D  e().toISOmargin ),e)ollurs   s:s{n ngth > 0 ?
            //  chedule
              to':1,otalClscheduleSnapassawait�getDocs()ollurs   (db, 'schedule')                 totFiebackup.)ollurs   s  cheduleass{ngth > 0 ?
            scheduleSnap.docslforEach(d休�{ebackup.)ollurs   s  chedule[d.i ]] |d.data( ;e}                 tooooo// customers
              to':1,otalClcustSnapassawait�getDocs()ollurs   (db, 'customers')                 totFiebackup.)ollurs   s customersass{ngth > 0 ?
            custSnap.docslforEach(d休�{ebackup.)ollurs   s customers[d.i ]] |d.data( ;e}                 tooooo// att   searemonths
              to':1,otalClmonthsasses202509',]202511',]202512',]202601',]202602',]202603|]gth > 0 ?
            for (otalClm]oflmonths �> { this.updateEditFieeeeetry=> { this.updateEditFie  to':1,otalClsnapassawait�getDocs()ollurs   (db, `att   sear_  m}`)                 totFie    eeee    !snap.empty �> { this.updateEditFieeeeeeeeeeeeebackup.)ollurs   s[`att   sear_  m}`]ass{ngth > 0 ?
                        snap.docslforEach(d休�{ebackup.)ollurs   s[`att   sear_  m}`][d.i ]] |d.data( ;e}                 tooooooooooooo}               totFie'3':} catch(  '{}               totFie}               tooooo// ev   _att   searemonths
              to':1,for (otalClm]oflmonths �> { this.updateEditFieeeeetry=> { this.updateEditFie  to':1,otalClsnapassawait�getDocs()ollurs   (db, `ev   _att   sear_  m}`)                 totFie    eeee    !snap.empty �> { this.updateEditFieeeeeeeeeeeeebackup.)ollurs   s[`ev   _att   sear_  m}`]ass{ngth > 0 ?
                        snap.docslforEach(d休�{ebackup.)ollurs   s[`ev   _att   sear_  m}`][d.i ]] |d.data( ;e}                 tooooooooooooo}               totFie'3':} catch(  '{}               totFie}               tooooo//  t�ウbo� t�Datド
              to':1,otalCljs    |JSON  drginify(backup,lnull, 2 ;
              totFieotalClblob =lnew Blob([js  ],s{ type: 'applica    /js  'e}                 tooooootalClurl =lURL createObjursURL(blob                 tooooootalCla =ldocum   .createElem   ('a'                 totFiea.href =lurl                totFiea.downloa  =l`backup_  new D  e().toISOmargin )�split('T')[0]}.js  `                totFiea.click( ;
              to':1,URL revokeObjursURL(url                 tooooo    statusEl)lstatusEl.i姓Ctat   ass`✅ l��ッ�-ti��ップ完了 (  new D  e().toLocalemargin 'ja-JP')})e                to� catch (error => { this.updateEditFieotalole.error('l��ッ�-ti��ップエitlea�:', error                 tooooo    statusEl)lstatusEl.i姓Ctat   ass`❌ l��ッ�-ti��ップ失敗:o${error.messagi}e                to�          to�        �        window.app =lnew D earS   ioApp( ;
        app.ini ( ;
    </script>
</body  </html>
